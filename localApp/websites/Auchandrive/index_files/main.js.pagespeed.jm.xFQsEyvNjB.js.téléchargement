(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter});}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="/";return __webpack_require__(__webpack_require__.s=50);})([(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var ObjectUtils=exports.ObjectUtils=function(){function ObjectUtils(){_classCallCheck(this,ObjectUtils)}return _createClass(ObjectUtils,null,[{key:"isNumeric",value:function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}},{key:"extend",value:function extend(obj,ext,skipNull){skipNull=skipNull||!1;var resultObj;if(null!=obj&&(resultObj=ObjectUtils.extend(null,obj,skipNull)),"undefined"!=typeof ext)if(Array.isArray(ext))Array.isArray(resultObj)?Array.prototype.push.apply(resultObj,ext):resultObj=ext.slice();else if("[object Object]"===Object.prototype.toString.call(ext)||"[object DOMStringMap]"===Object.prototype.toString.call(ext))for(var key in"[object Object]"!==Object.prototype.toString.call(resultObj)&&(resultObj={}),ext)skipNull&&null==ext[key]||(resultObj[key]=ObjectUtils.extend(resultObj[key],ext[key],skipNull));else resultObj=ext;return resultObj}},{key:"isTrue",value:function isTrue(bool){return"undefined"!=typeof bool&&null!=bool&&(!0==bool||"true"==bool)}}]),ObjectUtils}();}),(function(module,exports,__webpack_require__){"use strict";var _Utils=__webpack_require__(4),_Storage=__webpack_require__(6),_Ajax=__webpack_require__(7),_CacheableDOMAccessors=__webpack_require__(2),_DOMElements=__webpack_require__(8),_ObjectUtils=__webpack_require__(0),_Cookies=__webpack_require__(9),_URLUtils=__webpack_require__(5);module.exports={extend:_ObjectUtils.ObjectUtils.extend,isTrue:_ObjectUtils.ObjectUtils.isTrue,isNumeric:_ObjectUtils.ObjectUtils.isNumeric,spinner:_Utils.Utils.spinner,addLoaderOnElement:_Utils.Utils.addLoaderOnElement,removeLoaderOnElement:_Utils.Utils.removeLoaderOnElement,loadExternalScript:_Utils.Utils.loadExternalScript,serializeFormFields:_Utils.Utils.serializeFormFields,appendChilds:_DOMElements.DOMElements.appendChilds,appendChildren:_DOMElements.DOMElements.appendChildren,createElement:_DOMElements.DOMElements.createElement,getInnerText:_DOMElements.DOMElements.getInnerText,closest:_DOMElements.DOMElements.closest,animate:_DOMElements.DOMElements.animate,getOffset:_DOMElements.DOMElements.getOffset,getScroll:_DOMElements.DOMElements.getScroll,getRelativeOffset:_DOMElements.DOMElements.getRelativeOffset,isInViewport:_DOMElements.DOMElements.isInViewport,getCookie:_Cookies.Cookies.getCookie,setCookie:_Cookies.Cookies.setCookie,addCookie:_Cookies.Cookies.addCookie,removeCookie:_Cookies.Cookies.removeCookie,isReferringItSelf:_URLUtils.URLUtils.isReferringItself,getRequestParam:_URLUtils.URLUtils.getRequestParam,buildUriParams:_URLUtils.URLUtils.buildUriParams,addQueryString:_URLUtils.URLUtils.addQueryString,addRequestParam:_URLUtils.URLUtils.addRequestParam,updateRequestParam:_URLUtils.URLUtils.updateRequestParam,qs:function qs(_qs,settings){return _CacheableDOMAccessors.CacheableDOMAccessors.qs(_qs,settings)},qsAll:function qsAll(_qsAll,settings){return _CacheableDOMAccessors.CacheableDOMAccessors.qsAll(_qsAll,settings)},ajaxGet:_Ajax.Ajax.ajaxGet,ajaxPost:_Ajax.Ajax.ajaxPost,ajaxForm:_Ajax.Ajax.ajaxForm,ajax:_Ajax.Ajax.ajax,Storage:_Storage.Storage};}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ObjectUtils=__webpack_require__(0);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var CacheableDOMAccessors=function(){function CacheableDOMAccessors(){return _classCallCheck(this,CacheableDOMAccessors),window.A=window.A||{},window.A.domAccessorsInstance||(this.registry={},this.defaultQuerySelectorConfig={parent:document,cache:!0,cacheOnNull:!0,clear:!1},window.A.domAccessorsInstance=this),window.A.domAccessorsInstance}return _createClass(CacheableDOMAccessors,[{key:"_findInDomRegistry",value:function _findInDomRegistry(registry,parent){if(Array.isArray(registry))for(var i=registry.length;0<=--i;)if(registry[i].parent===parent)return registry[i].result}},{key:"_clearInDomRegistry",value:function _clearInDomRegistry(registry,parent){if(Array.isArray(registry))for(var i=registry.length;0<=--i;)if(registry[i].parent===parent){registry.splice(i,1);break}}},{key:"qs",value:function qs(querySelector,customConfig){var config=_ObjectUtils.ObjectUtils.extend(this.defaultQuerySelectorConfig,customConfig);if(null!=config.parent&&null!=querySelector){this.registry["qs_"+querySelector]=this.registry["qs_"+querySelector]||[];var result;if(_ObjectUtils.ObjectUtils.isTrue(config.clear)?this._clearInDomRegistry(this.registry["qs_"+querySelector],config.parent):result=this._findInDomRegistry(this.registry["qs_"+querySelector],config.parent),!_ObjectUtils.ObjectUtils.isTrue(config.cache)||"undefined"==typeof result){var el=config.parent.querySelector(querySelector);return(null!=el||_ObjectUtils.ObjectUtils.isTrue(config.cacheOnNull))&&_ObjectUtils.ObjectUtils.isTrue(config.cache)&&this.registry["qs_"+querySelector].push({parent:config.parent,result:el}),el}return result}return null}},{key:"qsAll",value:function qsAll(querySelectorAll,customConfig){var config=_ObjectUtils.ObjectUtils.extend(this.defaultQuerySelectorConfig,customConfig);if(null!=config.parent&&null!=querySelectorAll){this.registry["qsAll_"+querySelectorAll]=this.registry["qsAll_"+querySelectorAll]||[];var result;if(_ObjectUtils.ObjectUtils.isTrue(config.clear)?this._clearInDomRegistry(this.registry["qsAll_"+querySelectorAll],config.parent):result=this._findInDomRegistry(this.registry["qsAll_"+querySelectorAll],config.parent),!_ObjectUtils.ObjectUtils.isTrue(config.cache)||"undefined"==typeof result){var el=config.parent.querySelectorAll(querySelectorAll);return _ObjectUtils.ObjectUtils.isTrue(config.cache)&&this.registry["qsAll_"+querySelectorAll].push({parent:config.parent,result:el}),el}return result}return[]}}]),CacheableDOMAccessors}();module.exports={CacheableDOMAccessors:new CacheableDOMAccessors};}),(function(module,exports,__webpack_require__){"use strict";var _Events=__webpack_require__(10),_Events2=_interopRequireDefault(_Events);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var eventsInstance=new _Events2.default;module.exports={addEvent:function addEvent(rootElement,eventName,callBackFunction,querySelector,objParent){eventsInstance.addEvent(rootElement,eventName,callBackFunction,querySelector,objParent)},removeEvent:function removeEvent(rootElement,eventName,callBackFunction,querySelector){eventsInstance.removeEvent(rootElement,eventName,callBackFunction,querySelector)},dispatchEvent:_Events2.default.dispatchEvent};}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=void 0;var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_CacheableDOMAccessors=__webpack_require__(2);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Utils=exports.Utils=function(){function Utils(){_classCallCheck(this,Utils)}return _createClass(Utils,null,[{key:"spinner",value:function spinner(action){var spinnerEl=_CacheableDOMAccessors.CacheableDOMAccessors.qs("#spinner");spinnerEl&&("show"===action?requestAnimationFrame(function(){spinnerEl.classList.add("active")}):requestAnimationFrame(function(){spinnerEl.classList.remove("active")}))}},{key:"addLoaderOnElement",value:function addLoaderOnElement(domEl){var spinnerEl=_CacheableDOMAccessors.CacheableDOMAccessors.qs("#spinner");if(null!=spinnerEl){var spinnerCloneEl=spinnerEl.cloneNode(!0);spinnerCloneEl.removeAttribute("id"),spinnerCloneEl.classList.add("active","spinner--layer"),null!=domEl&&domEl.appendChild(spinnerCloneEl)}}},{key:"removeLoaderOnElement",value:function removeLoaderOnElement(parentDomEl){if(null!=parentDomEl){var spinnerLayerEl=_CacheableDOMAccessors.CacheableDOMAccessors.qs(".spinner--layer",{parent:parentDomEl});null!=spinnerLayerEl&&spinnerLayerEl.remove()}}},{key:"loadExternalScript",value:function loadExternalScript(src,options){var forceScriptLoading=2<arguments.length&&void 0!==arguments[2]&&arguments[2],haveToLoad=forceScriptLoading||null==_CacheableDOMAccessors.CacheableDOMAccessors.qs("script[src='"+src+"']",{cacheOnNull:!1});if(haveToLoad){var on_success=options.onSuccess||function(){},on_timeout=options.onTimeout||function(){console.error("Cannot load external script from url: "+src)},timeout=options.timeout||10,timeout_trigger=window.setTimeout(function(){on_timeout()},1e3*timeout),script=document.createElement("script");script.type="text/javascript",script.src=src,script.async=!0,script.onload=script.onreadystatechange=function(data){(!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,window.clearTimeout(timeout_trigger),on_success(data))};var headEl=_CacheableDOMAccessors.CacheableDOMAccessors.qs("head");null!=headEl&&headEl.appendChild(script)}}},{key:"serializeFormFields",value:function serializeFormFields(formEl){var elArray,data={};if(formEl){elArray=[].filter.call(formEl.elements,function(el){var test="checkbox"!==el.type&&"radio"!==el.type||el.checked;return test}).filter(function(el){return!!el.name});for(var i=0;i<elArray.length;i++)data[elArray[i].name]?data[elArray[i].name]+=";"+elArray[i].value:data[elArray[i].name]=elArray[i].value}return data}}]),Utils}();}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var URLUtils=exports.URLUtils=function(){function URLUtils(){_classCallCheck(this,URLUtils)}return _createClass(URLUtils,null,[{key:"isReferringItself",value:function isReferringItself(){function getURLWithoutProtocol(url){return 0==url.indexOf("http://")?url=url.substring(7):0==url.indexOf("https://")&&(url=url.substring(8)),url=url.toLowerCase(),url}var ref=document.referrer;if(null==ref||0==ref.length)return!1;ref=getURLWithoutProtocol(ref);var currentDomain=document.domain;return null==currentDomain||0==currentDomain.length?!1:(currentDomain=getURLWithoutProtocol(currentDomain),0==ref.indexOf(currentDomain))}},{key:"getRequestParam",value:function getRequestParam(name,url){var regExec=new RegExp("[?&]"+encodeURIComponent(name)+"=([^&]*)").exec(url||location.search);return regExec?decodeURIComponent(regExec[1]):null}},{key:"buildUriParams",value:function buildUriParams(data,prefix){function build(uriParams,data,key,paramKey){return paramKey&&null!=data[key]&&("object"===_typeof(data[key])?(uriParams.length&&(uriParams+="&"),uriParams+=URLUtils.buildUriParams(data[key],paramKey)):"function"!=typeof data[key]&&(uriParams.length&&(uriParams+="&"),uriParams+=encodeURIComponent(paramKey)+"="+encodeURIComponent(data[key]))),uriParams}data=data||{},prefix=prefix||"";var key,uriParams="";if(Array.isArray(data))for(var paramKey,i=0;i<data.length;i++)paramKey=prefix+"["+i+"]",uriParams=build(uriParams,data,i,paramKey);else for(key in data){var _paramKey=0<prefix.length?prefix+"."+key:key;uriParams=build(uriParams,data,key,_paramKey)}return uriParams}},{key:"addQueryString",value:function addQueryString(baseUrl,queryString){return baseUrl&&queryString?baseUrl+(-1===baseUrl.indexOf("?")?"?":"&")+queryString:baseUrl}},{key:"addRequestParam",value:function addRequestParam(baseUrl,key,value){return baseUrl&&key&&value?URLUtils.addQueryString(baseUrl,key+"="+value):baseUrl}},{key:"updateRequestParam",value:function updateRequestParam(baseUrl,key,value,createIfNotPresent){if(baseUrl&&key&&value){var keyRegex=new RegExp("([?&])"+key+"[^&]*"),newUrl=baseUrl.replace(keyRegex,"$1"+key+"="+value);createIfNotPresent&&newUrl===baseUrl&&(newUrl=URLUtils.addRequestParam(baseUrl,key,value))}return newUrl}}]),URLUtils}();}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ObjectUtils=__webpack_require__(0);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Storage=function(){function Storage(){return _classCallCheck(this,Storage),Storage.instance||(this.availability={},this.TYPES={SESSION:1,LOCAL:2},Storage.instance=this),Storage.instance}return _createClass(Storage,[{key:"isAvailable",value:function(storageId){if(null!=storageId){if("undefined"==typeof this.availability[storageId]){var testKey="isSupported",isAvailable=!1,storage=this._getStorage(storageId);try{"undefined"==typeof storage?isAvailable=!1:(storage.setItem(testKey,"1"),storage.removeItem(testKey),isAvailable=!0)}catch(error){isAvailable=!1}return this.availability[storageId]=isAvailable,isAvailable}return _ObjectUtils.ObjectUtils.isTrue(this.availability[storageId])}return!1}},{key:"_getStorage",value:function _getStorage(id){return this.TYPES.LOCAL==id?window.localStorage:this.TYPES.SESSION==id?window.sessionStorage:null}},{key:"set",value:function set(key,value,storageId){storageId=storageId||this.TYPES.SESSION;var storage=this._getStorage(storageId);return null!=storage&&null!=key&&this.isAvailable(storageId)&&(storage.setItem(key,JSON.stringify(value)),!0)}},{key:"remove",value:function remove(key,storageId){storageId=storageId||this.TYPES.SESSION;var storage=this._getStorage(storageId);return null!=storage&&null!=key&&this.isAvailable(storageId)&&(storage.removeItem(key),!0)}},{key:"get",value:function get(key,storageId){storageId=storageId||this.TYPES.SESSION;var storage=this._getStorage(storageId);if(null!=storage&&null!=key&&this.isAvailable(storageId)){var jsonString=storage.getItem(key);if(null!=jsonString)return JSON.parse(jsonString)}return null}}]),Storage}(),instance=new Storage;module.exports={Storage:instance};}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ajax=void 0;var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Utils=__webpack_require__(4),_ObjectUtils=__webpack_require__(0),_URLUtils=__webpack_require__(5);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Ajax=exports.Ajax=function(){function Ajax(){_classCallCheck(this,Ajax)}return _createClass(Ajax,null,[{key:"getDefaultConfiguration",value:function getDefaultConfiguration(){return{url:null,success:null,error:null,dataType:"html",loader:!1,cacheable:!0,timeout:null,method:"GET",data:null,evalScripts:!1,triggerDomUpdate:!1,domUpdateElement:null,serialize:!0,async:!0,retries:0,retryInterval:500,beforeRetry:null}}},{key:"ajaxGet",value:function ajaxGet(customConfig){customConfig=customConfig||{},customConfig.method="GET",Ajax.ajax(customConfig)}},{key:"ajaxPost",value:function ajaxPost(customConfig){customConfig=customConfig||{},customConfig.method="POST",Ajax.ajax(customConfig)}},{key:"ajaxForm",value:function ajaxForm(form,customConfig){form&&(customConfig=customConfig||{},customConfig.url=customConfig.url||form.action,customConfig.data=_Utils.Utils.serializeFormFields(form),customConfig.method=form.getAttribute("method")||"GET",customConfig.enctype=form.getAttribute("enctype"),Ajax.ajax(customConfig))}},{key:"ajax",value:function ajax(customConfig){if(!customConfig.method)return void console.error("http method attribute is mandatory");if(customConfig=_ObjectUtils.ObjectUtils.extend(Ajax.getDefaultConfiguration(),customConfig),(-1==customConfig.url.indexOf("//")||-1!=customConfig.url.indexOf("//"+document.domain))&&(customConfig=_ObjectUtils.ObjectUtils.extend(customConfig,{headers:{"X-Requested-With":"XMLHttpRequest"}})),null!=customConfig.data)if(_ObjectUtils.ObjectUtils.isTrue(customConfig.serialize)&&(customConfig.data=_URLUtils.URLUtils.buildUriParams(customConfig.data)),"GET"===customConfig.method.toUpperCase())customConfig.url+="?"+customConfig.data,delete customConfig.data;else if("POST"===customConfig.method.toUpperCase()){var encType=customConfig.enctype;"multipart/form-data"==encType?customConfig=_ObjectUtils.ObjectUtils.extend(customConfig,{headers:{enctype:encType}}):encType?customConfig=_ObjectUtils.ObjectUtils.extend(customConfig,{headers:{"Content-Type":encType}}):(!customConfig.headers||!customConfig.headers["Content-Type"])&&(customConfig=_ObjectUtils.ObjectUtils.extend(customConfig,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}))}Ajax._createAndSendXHRRequest(customConfig)}},{key:"_handleAjaxError",value:function _handleAjaxError(xhr,config){config.retries&&0<config.retries&&(!config.beforeRetry||"function"==typeof config.beforeRetry&&config.beforeRetry.call(null,xhr))?(config.retries--,setTimeout(function(){Ajax._createAndSendXHRRequest(config)},config.retryInterval)):("function"==typeof config.error&&config.error(xhr),_ObjectUtils.ObjectUtils.isTrue(config.loader)&&_Utils.Utils.spinner("hide"))}},{key:"_createAndSendXHRRequest",value:function _createAndSendXHRRequest(config){if(_ObjectUtils.ObjectUtils.isTrue(config.loader)&&_Utils.Utils.spinner("show"),config.url){var requestUrl=config.url;_ObjectUtils.ObjectUtils.isTrue(config.cacheable)||(requestUrl+=(-1===requestUrl.indexOf("?")?"?":"&")+"t="+new Date().getTime());var xhr=new XMLHttpRequest;if(xhr.onload=function(){Ajax._handleAjaxResponse(xhr,config)},xhr.upload&&"function"==typeof config.progress&&(xhr.upload.onprogress=config.progress),xhr.onerror=function(){Ajax._handleAjaxError(xhr,config)},xhr.open(config.method,requestUrl,_ObjectUtils.ObjectUtils.isTrue(config.async)),config.timeout&&(xhr.timeout=config.timeout,xhr.ontimeout=function(){Ajax._handleAjaxError(xhr,config)}),"json"===config.dataType&&(config.headers=config.headers||{},config.headers.Accept="application/json"),null!=config.headers)for(var headerKey in config.headers)xhr.setRequestHeader(headerKey,config.headers[headerKey]);if(null!=config.xhrFields)for(var fieldKey in config.xhrFields)xhr[fieldKey]=config.xhrFields[fieldKey];null!=xhr&&xhr.send(config.data)}else console.error("No target URL has been found !")}},{key:"_handleAjaxResponse",value:function _handleAjaxResponse(xhr,config){if(4===xhr.readyState)if(200<=xhr.status&&299>=xhr.status){var data=null;if(null!=xhr.responseText&&0<xhr.responseText.length)if("json"===config.dataType)try{data=JSON.parse(xhr.responseText)}catch(error){return console.error(error),void Ajax._handleAjaxError(xhr,config)}else{data=xhr.responseText;for(var match,rawResponse=xhr.responseText,INLINE_SCRIPT_PATTERN=/<script\b[^>]*>([\s\S]*?)<\/script>/gm;match=INLINE_SCRIPT_PATTERN.exec(data);)data=data.replace(match[0],"");_ObjectUtils.ObjectUtils.isTrue(config.evalScripts)&&setTimeout(function(){for(var srcPatternMatch,match=void 0,INLINE_SCRIPT_PATTERN=/<script\b[^>]*>([\s\S]*?)<\/script>/gm;match=INLINE_SCRIPT_PATTERN.exec(rawResponse);)srcPatternMatch=/src="([^"]+)"/gm.exec(match[0]),srcPatternMatch&&srcPatternMatch[1]&&_Utils.Utils.loadExternalScript(srcPatternMatch[1],{}),match[1]&&window.eval(match[1])},100)}"function"==typeof config.success&&config.success(data,xhr),_ObjectUtils.ObjectUtils.isTrue(config.triggerDomUpdate)&&document.dispatchEvent(new CustomEvent("DOMUpdate",{detail:config.domUpdateElement})),_ObjectUtils.ObjectUtils.isTrue(config.loader)&&_Utils.Utils.spinner("hide")}else Ajax._handleAjaxError(xhr,config)}}]),Ajax}();}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DOMElements=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_CacheableDOMAccessors=__webpack_require__(2);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var DOMElements=exports.DOMElements=function(){function DOMElements(){_classCallCheck(this,DOMElements)}return _createClass(DOMElements,null,[{key:"isInViewport",value:function isInViewport(element){if(element){var rect=element.getBoundingClientRect(),html=document.documentElement;return 0<=rect.top&&0<=rect.left&&rect.bottom<=(window.innerHeight||html.clientHeight)&&rect.right<=(window.innerWidth||html.clientWidth)}return!1}},{key:"appendChilds",value:function appendChilds(rootElement,childrenArray){DOMElements.appendChildren(rootElement,childrenArray)}},{key:"appendChildren",value:function appendChildren(rootElement,childrenArray){"undefined"!=typeof rootElement&&Array.isArray(childrenArray)&&childrenArray.forEach(function(child){rootElement.appendChild(child)})}},{key:"getInnerText",value:function getInnerText(domElement){var text=domElement.innerText;return null==domElement?null:""==text?domElement.textContent:text}},{key:"closest",value:function closest(el,query){if(null!=el&&null!=query)for(var parent=el.parentElement;null!=parent&&"BODY"!==parent.tagName;){if(parent.matches(query))return parent;parent=parent.parentElement}return null}},{key:"createElement",value:function createElement(name,attrs,content,childrenArray){var el=document.createElement(name.toString());return!attrs||Object.keys(attrs).forEach(function(key){el.setAttribute(key,attrs[key])}),"string"==typeof content&&(el.innerHTML=content),DOMElements.appendChilds(el,childrenArray),el}},{key:"createText",value:function createText(text){return document.createTextNode(text)}},{key:"animate",value:function animate(obj,options,duration){function cleanupValues(options){for(var key in options)"number"==typeof options[key]?options[key]=parseInt(options[key]):"object"===_typeof(options[key])&&cleanupValues(options[key])}function applyValues(target,options,duration){if(null!=target&&null!=options)for(var key in options)if("undefined"!=typeof target[key]){var to=options[key],currentValue=target[key];if("object"===("undefined"==typeof to?"undefined":_typeof(to)))applyValues(currentValue,to,duration);else{var perTick=parseInt(10*((to-currentValue)/duration));target[key]=currentValue+perTick}}}function innerAnimate(el,options,duration){0<duration?(applyValues(el,options,duration),setTimeout(function(){innerAnimate(el,options,duration-10)},10)):null!=options.callback&&options.callback()}if(null!=obj&&null!=options){var els=[],objectType=Object.prototype.toString.call(obj);"[object String]"===objectType?els=_CacheableDOMAccessors.CacheableDOMAccessors.qsAll(obj,options):els.push(obj),0<els.length&&(duration=duration||300,cleanupValues(options),els.forEach(function(el){innerAnimate(el,options,duration)}))}}},{key:"getOffset",value:function getOffset(el,offset){var result=0;return null!=el&&(result+=el.getBoundingClientRect().top+(window.pageYOffset||document.scrollTop||0)-(document.clientTop||0),"bottom"==offset&&(result+=el.getBoundingClientRect().height)),result}},{key:"getScroll",value:function getScroll(axis){return null==axis?null:window["scroll"+axis]||window["page"+axis+"Offset"]}},{key:"getRelativeOffset",value:function getRelativeOffset(el,parentEl,offset){var result=0;return null!=el&&null!=parentEl&&(result+=el.offsetTop-parentEl.offsetTop,"bottom"==offset&&(result+=el.getBoundingClientRect().height)),result}}]),DOMElements}();}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cookies=void 0;var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ObjectUtils=__webpack_require__(0);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Cookies=exports.Cookies=function(){function Cookies(){_classCallCheck(this,Cookies)}return _createClass(Cookies,null,[{key:"_getDefaultCookieSettings",value:function _getDefaultCookieSettings(){return{maxAge:0,domain:"",path:"/"}}},{key:"getCookie",value:function getCookie(cookieName){for(var cookie,name=cookieName+"=",cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){for(cookie=cookies[i];" "===cookie.charAt(0);)cookie=cookie.substring(1);if(0===cookie.indexOf(name))return cookie.substring(name.length,cookie.length)}return null}},{key:"setCookie",value:function setCookie(cookieName,cookieValue,days,path,cookieDomain){if(null!=cookieName){cookieValue=cookieValue||"";var expires;if(_ObjectUtils.ObjectUtils.isNumeric(days)){var date=0<days?new Date(new Date().getTime()+1e3*(60*(60*(24*days)))):new Date(days);expires="; expires="+date.toUTCString()}else expires="";document.cookie=cookieName+"="+cookieValue+expires+("; path="+(path||"/"))+"; domain="+(cookieDomain||"")}}},{key:"addCookie",value:function addCookie(cookieName,cookieValue,settings){if(cookieName){cookieValue=cookieValue||"";var customSettings=_ObjectUtils.ObjectUtils.extend(Cookies._getDefaultCookieSettings(),settings),cookiePath=customSettings.path?"; path="+customSettings.path:"/",cookieDomain=customSettings.domain?"; domain="+customSettings.domain:"",cookieString=cookieName+"="+cookieValue+cookiePath+cookieDomain;if(customSettings.maxAge){var expiryDate=new Date(new Date().getTime()+1e3*customSettings.maxAge);cookieString+="; expires="+expiryDate.toUTCString()+"; max-age="+customSettings.maxAge}document.cookie=cookieString}}},{key:"removeCookie",value:function removeCookie(cookieName,settings){var removeSettings=_ObjectUtils.ObjectUtils.extend(Cookies._getDefaultCookieSettings(),settings);removeSettings.maxAge=-1,Cookies.addCookie(cookieName,"",removeSettings)}}]),Cookies}();}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_polyfills=__webpack_require__(11),polyfill=_interopRequireWildcard(_a_polyfills);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Events=function(){function Events(){return _classCallCheck(this,Events),polyfill.initPolyfill(),window.A=window.A||{},window.A.eventsInstance||(this.eventsConfigurations=[],this.eventsUsingCapture=["focus","blur","scroll","hover"],this.passiveEvents=["scroll"],this.isDOMReady=!1,this.DOMContentLoadedEvent=null,this.addEvent(document,"DOMContentLoaded",this._saveDomContentLoadedState,null,this),window.A.eventsInstance=this),window.A.eventsInstance}return _createClass(Events,[{key:"removeEvent",value:function removeEvent(rootElement,eventName,callBackFunction,querySelector){if(rootElement&&("undefined"==typeof eventName?"undefined":_typeof(eventName))&&"function"==typeof callBackFunction){var properties=this._getEventPropertiesForElement(rootElement),events=properties.events;if(events[eventName]){events[eventName]=events[eventName]||[];for(var el,i=events[eventName].length-1;0<=i;i--)el=events[eventName][i],el.qs===querySelector&&el.fn===callBackFunction&&events[eventName].splice(i,1);0===events[eventName].length&&(rootElement.removeEventListener(eventName,properties.fn,polyfill.supportsPassive?{capture:-1!=this.eventsUsingCapture.indexOf(eventName),passive:-1!=this.passiveEvents.indexOf(eventName)}:-1!=this.passiveEvents.indexOf(eventName)),delete events[eventName])}}}},{key:"addEvent",value:function addEvent(rootElement,eventName,callBackFunction,querySelector,objParent){if(rootElement&&eventName&&"function"==typeof callBackFunction){if(this.isDOMReady&&"DOMContentLoaded"==eventName)return void callBackFunction.call(objParent,this.DOMContentLoadedEvent);var properties=this._getEventPropertiesForElement(rootElement),events=properties.events;events[eventName]||rootElement.addEventListener(eventName,properties.fn,polyfill.supportsPassive?{capture:-1!=this.eventsUsingCapture.indexOf(eventName),passive:-1!=this.passiveEvents.indexOf(eventName)}:-1!=this.passiveEvents.indexOf(eventName)),events[eventName]=events[eventName]||[];for(var el,isAlreadyBound=!1,i=0;i<events[eventName].length;i++)el=events[eventName][i],el.qs===querySelector&&el.fn===callBackFunction&&(isAlreadyBound=!0);isAlreadyBound||events[eventName].push({fn:callBackFunction,qs:querySelector,op:objParent})}}},{key:"_saveDomContentLoadedState",value:function _saveDomContentLoadedState(e){this.DOMContentLoadedEvent=e,this.isDOMReady=!0}},{key:"_getNextDomElement",value:function _getNextDomElement(event,el,index){if(event.customTarget){var targetEl=event.customTarget;return delete event.customTarget,targetEl}return event.path&&event.path.length>index?event.path[index]:null==el&&0==index?event.target:null==el?null:el.parentElement}},{key:"_getEventPropertiesForElement",value:function _getEventPropertiesForElement(domElement){for(var _this=this,i=0;i<this.eventsConfigurations.length;i++)if(this.eventsConfigurations[i].domElement===domElement)return this.eventsConfigurations[i];var newEventProperties={domElement:domElement,events:{},fn:function fn(e){_this._evaluateDelegatedEvents(domElement,e)}};return this.eventsConfigurations.push(newEventProperties),newEventProperties}},{key:"_evaluateDelegatedEvents",value:function _evaluateDelegatedEvents(rootElement,e){e.isPropagationStopped=!1,e.stopPropagationInternal=e.stopPropagation,e.stopPropagation=function(){e.isPropagationStopped||(e.isPropagationStopped=!0,e.stopPropagationInternal())};var events=this._getEventPropertiesForElement(rootElement).events;events[e.type]=events[e.type]||[];for(var listeners=events[e.type].concat(),i=0,el=this._getNextDomElement(e,null,i);null!=el;){for(var j=0;j<listeners.length&&(null!=listeners[j]&&(null==listeners[j].qs||null!=el&&"undefined"!=typeof el.matches&&el.matches(listeners[j].qs))&&(e.matchingTarget=el,listeners[j].fn.call(listeners[j].op,e),listeners[j]=null),!0!=e.isPropagationStopped);j++);if(!0==e.isPropagationStopped||"BODY"===el.tagName)break;i++,el=this._getNextDomElement(e,el,i)}}}],[{key:"dispatchEvent",value:function dispatchEvent(eventName,domElement,rootEl){if(rootEl=rootEl||document,eventName&&domElement){var event=new CustomEvent(eventName);event.customTarget=domElement,rootEl.dispatchEvent(event)}}}]),Events}();exports.default=Events;}),(function(module,exports,__webpack_require__){"use strict";var supportsPassive=!0,initPolyfill=function(){var _Stringprototype=String.prototype;if(NodeList.prototype.forEach=Array.prototype.forEach,Array.prototype.isArray=Array.prototype.isArray||function(arg){return"[object Array]"===Object.prototype.toString.call(arg)},Array.prototype.filter=Array.prototype.filter||function(callback,thisArg){for(var array=this,result=[],i=0;i<array.length;i++)if(array.hasOwnProperty(i)){var value=array[i];callback.call(thisArg,value,i,this)&&result.push(array[i])}return result},Array.prototype.map=Array.prototype.map||function(callback,thisArg){for(var array=this,result=[],i=0;i<array.length;i++)array.hasOwnProperty(i)&&result.push(callback.call(thisArg,array[i],i,this));return result},Element.prototype.matches=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector,navigator.userAgent.match(/iPhone;.*CPU.*OS 7_\d/i)&&!window.navigator.standalone&&(document.querySelector("html").style["overflow-x"]="hidden"),void 0!==supportsPassive)try{var opts=Object.defineProperty({},"passive",{get:function get(){supportsPassive=!0}});window.addEventListener("test",null,opts)}catch(e){}try{var ce=new window.CustomEvent("test");if(ce.preventDefault(),!0!==ce.defaultPrevented)throw new Error("Could not prevent default")}catch(e){window.CustomEvent=function(eventName,params){params=params||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");e.initCustomEvent(eventName,params.bubbles,params.cancelable,params.detail);var origPrevent=e.preventDefault;return e.preventDefault=function(){origPrevent.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function get(){return!0}})}catch(e){this.defaultPrevented=!0}},e},CustomEvent.prototype=window.Event.prototype}(function(window){if("undefined"==typeof window.HashChangeEvent){var location=window.location,oldURL=location.href,oldHash=location.hash;setInterval(function(){var newURL=location.href,newHash=location.hash;if(newHash!=oldHash){var e=new CustomEvent("hashchange");e.oldURL=oldURL,e.newURL=newURL,window.dispatchEvent(e),oldURL=newURL,oldHash=newHash}},100)}})(window),_Stringprototype.startsWith||(_Stringprototype.startsWith=function(searchString,position){return position=position||0,this.substr(position,searchString.length)===searchString}),function(){var dummy=document.createElement("div"),dtp=DOMTokenList.prototype,toggle=dtp.toggle,add=dtp.add,rem=dtp.remove;dummy.classList.add("class1","class2"),dummy.classList.contains("class2")||(dtp.add=function(){Array.prototype.forEach.call(arguments,add.bind(this))},dtp.remove=function(){Array.prototype.forEach.call(arguments,rem.bind(this))}),dummy.classList.toggle("class1",!0)||(dtp.toggle=function(cls,forcedState){return void 0===forcedState?toggle.call(this,cls):((forcedState?add:rem).call(this,cls),!!forcedState)})}()};Date.prototype.formatDate=function(){var yyyy=this.getFullYear(),mm=9>this.getMonth()?"0"+(this.getMonth()+1):this.getMonth()+1,dd=10>this.getDate()?"0"+this.getDate():this.getDate();return dd+"/"+mm+"/"+yyyy},module.exports={supportsPassive:supportsPassive,initPolyfill:initPolyfill,formatDate:Date.prototype.formatDate};}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modalClose=exports.modalOpen=exports.modalInit=void 0;var _a_utils=__webpack_require__(1),_a_events=__webpack_require__(3),modalClose=function(e){var body=(0,_a_utils.qs)("body");body.classList.remove("modal--body");var closeAllModals=!0;if(e){var dataModal=e.matchingTarget.dataset.modal;if(dataModal){var modal=(0,_a_utils.qsAll)("."+dataModal,{cache:!1});modal&&(closeAllModals=!1,modal.forEach(function(el){el.classList.remove("modal--open")}))}}if(closeAllModals){var allModals=(0,_a_utils.qsAll)(".modal--open",{cache:!1});allModals.forEach(function(el){el.classList.remove("modal--open")})}},modalOpen=function(e,modalContainer){modalClose();var modalContainerEl=modalContainer,body=(0,_a_utils.qs)("body");if(body.classList.add("modal--body"),e){var dataModal=e.matchingTarget.dataset.modal;dataModal&&(modalContainerEl=(0,_a_utils.qs)("."+dataModal,{cache:!1}))}if(modalContainerEl)if(modalContainerEl.classList.add("modal--open"),modalContainerEl.dataset.focusElement){var focusableEl=(0,_a_utils.qs)(modalContainerEl.dataset.focusElement,{parent:modalContainerEl});focusableEl&&(focusableEl.setAttribute("tabindex",-1),focusableEl.focus())}else modalContainerEl.setAttribute("tabindex",-1),modalContainerEl.focus()},modalEscape=function(e){27===e.keyCode&&modalClose()},modalInit=function(){(0,_a_events.addEvent)(document,"click",modalClose,".modalClose"),(0,_a_events.addEvent)(document,"click",modalOpen,".modalOpen"),(0,_a_events.addEvent)(document,"keyup",modalEscape)};exports.modalInit=modalInit,exports.modalOpen=modalOpen,exports.modalClose=modalClose;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1),_a_events=__webpack_require__(3);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Notifier=function(){function Notifier(settings){return _classCallCheck(this,Notifier),window.A=window.A||{},window.A.Notifier||(window.A.Notifier=this,this.init(settings)),window.A.Notifier}return _createClass(Notifier,[{key:"init",value:function init(settings){var _this=this;this.notifications=[],this.settings={defaultDuration:5e3,max:3,showProgress:!1,storageId:_a_utils.Storage.TYPES.LOCAL,storageKey:"aecn",closing:{enabled:!1,icon:"icon-circleClose"},icons:{default:"icon-circleInfo",error:"icon-circleError",success:"icon-circleCheck",info:"icon-circleInfo"}},this.settings=(0,_a_utils.extend)(this.settings,settings),this.isTouchScreen="ontouchmove"in window,(0,_a_events.addEvent)(document,"animationend",function(e){return _this._handleNotificationAnimationEnd(e)},".notification__progress-bar--inner"),this.isMobile||((0,_a_events.addEvent)(document,"mouseover",function(e){return _this._handleNotificationMouseEnter(e)},".notification"),(0,_a_events.addEvent)(document,"mouseout",function(e){return _this._handleNotificationMouseLeave(e)},".notification")),(0,_a_events.addEvent)(document,"click",function(e){return _this._closeNotification(e)},".notification__close"),setTimeout(function(){return _this._displayAwaitingNotifications()},500)}},{key:"addNotification",value:function addNotification(type,imageUrl,text,duration,customClass){var notificationId="notification_"+new Date().getTime(),notification=this._createNotification(type||"default",imageUrl,text,notificationId,customClass),notifier=(0,_a_utils.qs)(".notifier");if(notifier){if(notifier.appendChild(notification),this.notifications.length>=this.settings.max){var notificationToRemove=(0,_a_utils.qs)("#"+this.notifications.shift(),{cache:!1});this._removeNotification(notificationToRemove)}this.notifications.push(notificationId),this._setNotificationRemoveDelay(notificationId,duration||this.settings.defaultDuration)}}},{key:"addAsyncNotification",value:function addAsyncNotification(type,imageUrl,text,duration,customClass){var storageAvailable=_a_utils.Storage.isAvailable(this.settings.storageId);if(storageAvailable){var notification={type:type,imageUrl:imageUrl,text:text,duration:duration,customClass:customClass},notifications=_a_utils.Storage.get(this.settings.storageKey,this.settings.storageId);null!=notifications&&Array.isArray(notifications)?notifications.push(notification):notifications=[notification],_a_utils.Storage.set(this.settings.storageKey,notifications,this.settings.storageId)}}},{key:"_createNotification",value:function _createNotification(type,imageUrl,text,notificationId,customClass){var notificationContainerEl=(0,_a_utils.createElement)("div",{class:"notification "+type+(this.isTouchScreen?" ":" notification--notouch ")+(customClass?customClass:""),id:notificationId}),mediaContainerEl=(0,_a_utils.createElement)("div",{class:"notification__media","aria-hidden":"true"});return imageUrl&&mediaContainerEl.appendChild((0,_a_utils.createElement)("img",{class:"notification__media-thumbnail",src:imageUrl,onerror:"this.remove()"})),mediaContainerEl.appendChild((0,_a_utils.createElement)("i",{class:"notification__media-icon "+this.settings.icons[type]+" "+("default"==type?"hidden":"")})),notificationContainerEl.appendChild(mediaContainerEl),notificationContainerEl.appendChild((0,_a_utils.createElement)("div",{class:"notification__content"},null,[(0,_a_utils.createElement)("div",{class:"notification__content-text"},text)])),this.settings.showProgress&&notificationContainerEl.appendChild((0,_a_utils.createElement)("div",{class:"notification__progress-bar"},null,[(0,_a_utils.createElement)("div",{class:"notification__progress-bar--inner animated-progress-bar"})])),this.settings.closing.enabled&&notificationContainerEl.appendChild((0,_a_utils.createElement)("i",{class:"notification__close "+this.settings.closing.icon})),notificationContainerEl}},{key:"_setNotificationRemoveDelay",value:function _setNotificationRemoveDelay(notificationId,duration){var notification=(0,_a_utils.qs)("#"+notificationId);if(notification){var innerProgressBar=(0,_a_utils.qs)(".notification__progress-bar--inner",{cache:!1,parent:notification});innerProgressBar&&(innerProgressBar.style.animationDuration=duration+"ms")}}},{key:"_handleNotificationMouseEnter",value:function _handleNotificationMouseEnter(e){var progressBar=(0,_a_utils.qs)(".notification__progress-bar--inner",{cache:!1,parent:e.matchingTarget});progressBar&&progressBar.classList.contains("animated-progress-bar")&&progressBar.classList.remove("animated-progress-bar")}},{key:"_handleNotificationMouseLeave",value:function _handleNotificationMouseLeave(e){var progressBar=(0,_a_utils.qs)(".notification__progress-bar--inner",{cache:!1,parent:e.matchingTarget});progressBar&&progressBar.classList.add("animated-progress-bar")}},{key:"_handleNotificationAnimationEnd",value:function _handleNotificationAnimationEnd(e){var progressBar=e.matchingTarget,notification=(0,_a_utils.closest)(progressBar,".notification");notification&&this._removeNotification(notification)}},{key:"_removeNotification",value:function _removeNotification(notification){notification&&(notification.style.transition="transition: all 250ms ease",notification.style.opacity=0,setTimeout(function(){notification.style.transition="transition: all 500ms ease",notification.classList.add("collapsed"),setTimeout(function(){return notification.remove()},400)},250))}},{key:"_displayAwaitingNotifications",value:function _displayAwaitingNotifications(){var awaitingNotifications=[];if(_a_utils.Storage.isAvailable(this.settings.storageId)){var awaitingNotificationsFromStorage=_a_utils.Storage.get(this.settings.storageKey,this.settings.storageId);awaitingNotificationsFromStorage&&Array.isArray(awaitingNotificationsFromStorage)&&(awaitingNotifications=awaitingNotifications.concat(awaitingNotificationsFromStorage),_a_utils.Storage.remove(this.settings.storageKey,this.settings.storageId))}var awaitingNotificationsForms=(0,_a_utils.qsAll)(".asyncNotifications .asyncNotification"),awaitingNotificationsFormsSerialized=Array.prototype.slice.call(awaitingNotificationsForms).map(function(form){return(0,_a_utils.serializeFormFields)(form)});awaitingNotifications=awaitingNotifications.concat(awaitingNotificationsFormsSerialized),this._gracefullyDisplayAsyncNotifications(awaitingNotifications)}},{key:"_gracefullyDisplayAsyncNotifications",value:function _gracefullyDisplayAsyncNotifications(awaitingNotifications){var _this2=this;if(awaitingNotifications.length){var awaitingNotification=awaitingNotifications.shift();this.addNotification(awaitingNotification.type,awaitingNotification.imageUrl,awaitingNotification.text,awaitingNotification.duration),setTimeout(function(){return _this2._gracefullyDisplayAsyncNotifications(awaitingNotifications)},400)}}},{key:"_closeNotification",value:function _closeNotification(event){var notification=(0,_a_utils.closest)(event.matchingTarget,".notification");notification&&this._removeNotification(notification)}}]),Notifier}();exports.default=Notifier;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVisibility=exports.storeCurrentUrl=exports.goReferer=exports.goBack=void 0;var _a_utils=__webpack_require__(1),goBack=function(){var pathArray=document.referrer.split("/"),protocol=pathArray[0],host=pathArray[2],url_now=window.location.protocol+"//"+window.location.host;protocol+"//"+host==url_now?window.history.back():window.location="/"},goReferer=function(localStoragePat){var referer=_a_utils.Storage.get(localStoragePat,_a_utils.Storage.TYPES.LOCAL);null!=referer&&window.location.pathname!=referer?window.location=referer:goBack()},getVisibility=function(element){if(element){var rect=element.getBoundingClientRect(),html=document.documentElement;return{visible:(0,_a_utils.isInViewport)(element),left:rect.left,right:(window.innerWidth||html.clientWidth)-rect.right,top:rect.top,bottom:(window.innerHeight||html.clientHeight)-rect.bottom}}return{visible:!1,right:0,left:0,bottom:0,top:0}},storeCurrentUrl=function(storageKey,urlRestriction){var currentUrl=window.location.pathname,isUrlRestrictionValid=!urlRestriction||urlRestriction&&!currentUrl.startsWith(urlRestriction);_a_utils.Storage.isAvailable(_a_utils.Storage.TYPES.LOCAL)&&isUrlRestrictionValid&&_a_utils.Storage.set(storageKey,currentUrl,_a_utils.Storage.TYPES.LOCAL)};exports.goBack=goBack,exports.goReferer=goReferer,exports.storeCurrentUrl=storeCurrentUrl,exports.getVisibility=getVisibility;}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_events=__webpack_require__(3),_a_utils=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var LazyLoad=function(){function LazyLoad(){return _classCallCheck(this,LazyLoad),window.A=window.A||{},window.A.lazyLoadInstance||(this.isInitialized=!1,this._inProgressLazyLoad={},this._defaultViewRectMultiplier=1.4,this._defaultLazySettings={load:{},elements:{waiting:[],processing:[],completed:[]},timer:null},this._viewRectLimits=null,this._handlersConfiguration=[],window.A.lazyLoadInstance=this),window.A.lazyLoadInstance}return _createClass(LazyLoad,[{key:"init",value:function init(){this.isInitialized||(this.isInitialized=!0,this._updateViewRectLimits(),(0,_a_events.addEvent)(document,"orientationchange",this._updateViewRectLimits,null,this),(0,_a_events.addEvent)(document,"DOMUpdate",this._handleDomUpdate,null,this))}},{key:"addLazyload",value:function addLazyload(config){if(!this.isInitialized)throw new Error("init() must be called before");null!=config&&null!=config.qs&&"function"==typeof config.handler&&(config.viewRectMultiplier=config.viewRectMultiplier||this._defaultViewRectMultiplier,this._handlersConfiguration.push(config),this._initializeLazyLoad(config))}},{key:"_updateViewRectLimits",value:function _updateViewRectLimits(){this._viewRectLimits={bottom:0,right:0,top:window.innerHeight||document.documentElement.clientHeight,left:window.innerWidth||document.documentElement.clientWidth}}},{key:"_shouldBeLazyLoaded",value:function _shouldBeLazyLoaded(el,viewRectMultiplier){if(null===this._viewRectLimits)throw new Error("_viewRectLimits is null");var rect=el.getBoundingClientRect();return rect.bottom>=this._viewRectLimits.bottom*viewRectMultiplier&&rect.right>=this._viewRectLimits.right&&rect.top<=this._viewRectLimits.top*viewRectMultiplier&&rect.left<=this._viewRectLimits.left}},{key:"_initializeLazyLoad",value:function _initializeLazyLoad(config){var _this=this;if(null!=config){var updateElList=(0,_a_utils.qsAll)(config.qs,{cache:!1});if(0<updateElList.length)if("undefined"==typeof this._inProgressLazyLoad[config.qs]){var settings=(0,_a_utils.extend)({},this._defaultLazySettings);settings.elements.waiting=updateElList,settings.load=function(){return 0!==settings.elements.waiting.length&&void(clearTimeout(settings.timer),settings.timer=setTimeout(function(){_this._evaluateLoad(config)},30))},(0,_a_events.addEvent)(window,"scroll",settings.load,null,this),this._inProgressLazyLoad[config.qs]=settings,settings.load.call()}else this._inProgressLazyLoad[config.qs].elements.waiting=[].filter.call(updateElList,function(el){return-1===_this._inProgressLazyLoad[config.qs].elements.completed.indexOf(el)}),this._inProgressLazyLoad[config.qs].load.call()}}},{key:"_evaluateLoad",value:function _evaluateLoad(config){var _this2=this,cleanedElementList=[];this._inProgressLazyLoad[config.qs].elements.processing.length=0,this._inProgressLazyLoad[config.qs].elements.waiting.forEach(function(el){_this2._shouldBeLazyLoaded(el,config.viewRectMultiplier)?_this2._inProgressLazyLoad[config.qs].elements.processing.push(el):cleanedElementList.push(el)}),requestAnimationFrame(function(){_this2._triggerLoad(config)}),this._inProgressLazyLoad[config.qs].elements.waiting=cleanedElementList}},{key:"_triggerLoad",value:function _triggerLoad(config){var _this3=this;this._inProgressLazyLoad[config.qs].elements.processing.forEach(function(el){config.handler.call(null,el),_this3._inProgressLazyLoad[config.qs].elements.completed.push(el)}),this._inProgressLazyLoad[config.qs].elements.processing.length=0}},{key:"_handleDomUpdate",value:function _handleDomUpdate(){var _this4=this;this._handlersConfiguration.forEach(function(config){_this4._initializeLazyLoad(config)})}}]),LazyLoad}();module.exports={LazyLoad:new LazyLoad};}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_larkContextLib=__webpack_require__(17),_larkContextLib2=_interopRequireDefault(_larkContextLib),_a_events=__webpack_require__(3),_a_utils=__webpack_require__(1),_a_lazyload=__webpack_require__(15);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var TrackingClient=function(){function TrackingClient(settings){return _classCallCheck(this,TrackingClient),window.trackingClientInstance||(window.trackingClientInstance=this,this._init(settings)),window.trackingClientInstance.initContextAndConfiguration(settings),window.trackingClientInstance}return _createClass(TrackingClient,[{key:"sendCustomTrackingRequest",value:function sendCustomTrackingRequest(customRequest){var request=(0,_a_utils.extend)(this.basicContextInstance.getContext(),customRequest);customRequest.pageContext&&customRequest.pageContext.products&&(request.pageContext.products=customRequest.pageContext.products),this._sendTrackingRequest(request)}},{key:"initContextAndConfiguration",value:function initContextAndConfiguration(settings){var incomingContext=settings&&settings.context?settings.context:{},incomingConfiguration=settings&&settings.config?settings.config:{},defaultConfig=this.config||this._defaultConfig();this.basicContextInstance=new _larkContextLib2.default(incomingContext),this.config=(0,_a_utils.extend)(defaultConfig,incomingConfiguration)}},{key:"_init",value:function _init(settings){this.initContextAndConfiguration(settings),_a_lazyload.LazyLoad.init(),this._initViewTracking(),(0,_a_events.addEvent)(document,"click",this._handleItemClickTracking,this.config.trackingCssSelectors.CLICK,this)}},{key:"_initViewTracking",value:function _initViewTracking(){var _this=this;_a_lazyload.LazyLoad.addLazyload({viewRectMultiplier:1,qs:this.config.trackingCssSelectors.ITEM,handler:function handler(el){return _this._sendViewTrackingRequest(el)}})}},{key:"_sendTrackingRequest",value:function _sendTrackingRequest(request){request&&(0,_a_utils.ajaxPost)({url:this.config.endpoint+"/tracking",data:JSON.stringify(request),enctype:"application/json",serialize:!1})}},{key:"_handleItemClickTracking",value:function _handleItemClickTracking(e){var item=this._getParentItem(e.matchingTarget),area=this._getParentArea(e.matchingTarget);if(item&&area&&area.dataset.type){var request=(0,_a_utils.extend)({},this.basicContextInstance.getContext());request.type=area.dataset.type,request.metadata=item.dataset,request.eventType=this.config.eventTypes.CLICK,this._sendTrackingRequest(request)}}},{key:"_sendViewTrackingRequest",value:function _sendViewTrackingRequest(el){var area=(0,_a_utils.closest)(el,this.config.trackingCssSelectors.AREA);if(area){var request=(0,_a_utils.extend)({},this.basicContextInstance.getContext());request.type=area.dataset.type,request.metadata=el.dataset,request.eventType=this.config.eventTypes.VIEW,this._sendTrackingRequest(request)}}},{key:"_getParentArea",value:function _getParentArea(el){return(0,_a_utils.closest)(el,this.config.trackingCssSelectors.AREA)}},{key:"_getParentItem",value:function _getParentItem(el){return(0,_a_utils.closest)(el,this.config.trackingCssSelectors.ITEM)}},{key:"_defaultConfig",value:function _defaultConfig(){return{endpoint:"https://api.auchan.net/tracking/v1",trackingCssSelectors:{AREA:".track-area",ITEM:".track-item",CLICK:".track-item button, .track-item a"},eventTypes:{VIEW:"VIEW",CART:"ADD_TO_CART",WISHLIST:"ADD_TO_WISHLIST",CLICK:"CLICK",SUBMIT:"SUBMIT",PURCHASE:"PURCHASE",LOAD:"LOAD"}}}}]),TrackingClient}();exports.default=TrackingClient;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Context=function(){function Context(context){return _classCallCheck(this,Context),window.contextInstance?window.contextInstance.updateContext(context):(window.contextInstance=this,this.BROWSER_UUID_COOKIE="Browser.uuid",this.T2S_COOKIE="t2s-p",this.MAXIMUM_COOKIE_MAX_AGE=33696000,this._createBasicContext(context)),window.contextInstance}return _createClass(Context,[{key:"_createBasicContext",value:function _createBasicContext(context){this.context=(0,_a_utils.extend)({uuid:this._getBrowserUuid(),pageContext:{url:document.location.href,referrer:document.referrer},device:{windowSize:{width:window.innerWidth,height:window.innerHeight},userAgent:navigator.userAgent,deviceId:null},userContext:{id:null,location:null,stores:[]},cartItems:[]},context)}},{key:"_getBrowserUuid",value:function _getBrowserUuid(){var uuid=(0,_a_utils.getCookie)(this.BROWSER_UUID_COOKIE),t2s=(0,_a_utils.getCookie)(this.T2S_COOKIE);return!uuid&&t2s?((0,_a_utils.addCookie)(this.BROWSER_UUID_COOKIE,t2s,{maxAge:this.MAXIMUM_COOKIE_MAX_AGE}),t2s):(uuid&&uuid!=t2s&&(0,_a_utils.addCookie)(this.T2S_COOKIE,uuid,{maxAge:this.MAXIMUM_COOKIE_MAX_AGE}),uuid)}},{key:"__updateBrowserUuid",value:function __updateBrowserUuid(uuid){uuid&&((0,_a_utils.addCookie)(this.BROWSER_UUID_COOKIE,uuid,{maxAge:this.MAXIMUM_COOKIE_MAX_AGE}),(0,_a_utils.addCookie)(this.T2S_COOKIE,uuid,{maxAge:this.MAXIMUM_COOKIE_MAX_AGE}))}},{key:"getContext",value:function getContext(){return this.context}},{key:"updateContext",value:function updateContext(context){context&&(this.__updateBrowserUuid(context.uuid),this.context=(0,_a_utils.extend)(this.context,context))}}]),Context}();exports.default=Context;}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1),_a_notifier=__webpack_require__(13),_a_notifier2=_interopRequireDefault(_a_notifier),_a_events=__webpack_require__(3),_modal=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var BudgetBoxUtils=function(){function BudgetBoxUtils(){return _classCallCheck(this,BudgetBoxUtils),window.D=window.D||{},window.D.budgetBoxInstance||(this._init(),window.D.budgetBoxInstance=this),window.D.budgetBoxInstance}return _createClass(BudgetBoxUtils,[{key:"_init",value:function _init(){var _this=this;(0,_a_events.addEvent)(document,"click",function(e){return _this._openModal(e)},".use-ecoupon",this)}},{key:"addItemToCart",value:function addItemToCart(cug,quantity,displayModal){if(D&&D.budgetbox){var url=(0,_a_utils.addRequestParam)(D.budgetbox.servicePath+D.budgetbox.serviceAddAction,D.budgetbox.serviceCUGQueryParam,cug);url=(0,_a_utils.addRequestParam)(url,D.budgetbox.serviceQuantityQueryParam,quantity),(0,_a_utils.ajaxGet)({url:url,success:function success(response){var coupon=JSON.parse(response);if(coupon&&coupon.cugs&&(0,_a_utils.isTrue)(displayModal)){var cugs=coupon.cugs.join(","),imgUrl=coupon.couponMediaUrl;new _a_notifier2.default().addNotification(null,imgUrl+D.budgetbox.notifDeviceTypeQueryParam,D.budgetbox.notifMsg+"<br/> <a data-cugs='"+cugs+"' data-imgurl='"+imgUrl+"' class='use-ecoupon'>"+D.budgetbox.notifLink+"</a>",1e4,"budgetbox")}}})}}},{key:"_openModal",value:function _openModal(event){if(D&&D.budgetbox){new _a_notifier2.default()._closeNotification(event);var cugs=event.matchingTarget.dataset.cugs,cugsArray=cugs.split(","),imgSrc=event.matchingTarget.dataset.imgurl,urlModal=(0,_a_utils.addRequestParam)(D.budgetbox.servicePath+D.budgetbox.serviceModalAction,D.budgetbox.serviceImgUrlQueryParam,imgSrc);(0,_a_utils.ajaxGet)({url:urlModal,triggerDomUpdate:!0,success:function success(budghetBoxModalHtml){var modalsContainer=(0,_a_utils.qs)(".modal",{cache:!1});modalsContainer.innerHTML+=budghetBoxModalHtml;var budgetBoxModal=(0,_a_utils.qs)(".budgetbox-modal",{parent:modalsContainer,cache:!1});if(budgetBoxModal){var carousel=(0,_a_utils.qs)(".carousel__budgetbox"),carouselItems=(0,_a_utils.qs)(".carousel__items",{parent:carousel});if(carouselItems){var url=(0,_a_utils.addRequestParam)(D.budgetbox.servicePath+D.budgetbox.serviceOfferAction,D.budgetbox.serviceCUGSQueryParam,cugsArray);(0,_a_utils.ajaxGet)({url:url,triggerDomUpdate:!0,success:function success(data){carouselItems.innerHTML=data,(0,_modal.modalOpen)(null,budgetBoxModal)}})}}}})}}},{key:"deleteItemFromCart",value:function deleteItemFromCart(cug,quantity){if(D&&D.budgetbox){var url=(0,_a_utils.addRequestParam)(D.budgetbox.servicePath+D.budgetbox.serviceDeleteAction,D.budgetbox.serviceCUGQueryParam,cug);url=(0,_a_utils.addRequestParam)(url,D.budgetbox.serviceQuantityQueryParam,quantity),(0,_a_utils.ajaxGet)({url:url})}}}]),BudgetBoxUtils}();module.exports={BudgetBoxUtils:new BudgetBoxUtils};}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1),_a_notifier=__webpack_require__(13),_a_notifier2=_interopRequireDefault(_a_notifier),_a_events=__webpack_require__(3),_budgetBoxUtils=__webpack_require__(18),_larkTrackingClient=__webpack_require__(16),_larkTrackingClient2=_interopRequireDefault(_larkTrackingClient);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Cart=function(){function Cart(){return _classCallCheck(this,Cart),window.D=window.D||{},window.D.cartInstance||(this._MILLISECONDS_IN_A_SECOND=1e3,this.cartUpdateTimerRegistry={},this.inProgressCartUpdateRequests=[],this.updateSelectors=!0,this._isInitialized=!1,this._loaderTimer=null,this._cartRemovalTimers={},this._animcoEnabled=!1,this.trackingClient=new _larkTrackingClient2.default,window.D.cartInstance=this),window.D.cartInstance}return _createClass(Cart,[{key:"init",value:function init(){var _this=this;this._isInitialized||(this._isInitialized=!0,(0,_a_events.addEvent)(document,"click",this.toggleCart,".cart-toggler",this),(0,_a_events.addEvent)(document,"click",this._updateProductQuantity,".cart-update-button",this),(0,_a_events.addEvent)(document,"change",function(e){return _this._updateProductQuantity(e)},".product-update__input"),(0,_a_events.addEvent)(document,"submit",function(e){return _this._handleInputEnter(e)},".cart-updater-form"),(0,_a_events.addEvent)(document,"cartUpdate",this._updateCartTotal,null,this),(0,_a_events.addEvent)(document,"cartUpdate",this._updateProductsQuantitySelectors,null,this),(0,_a_events.addEvent)(document,"DOMUpdate",this._updateProductsQuantitySelectors,null,this),(0,_a_events.addEvent)(document,"submit",this._removeFromCart,".cart-remover",this),(0,_a_events.addEvent)(document,"click",this._cancelRemoveFromCart,".cart-product__cancel-button",this),(0,_a_events.addEvent)(document,"submit",this._addList,"#add-list",this),(0,_a_events.addEvent)(document,"DOMContentLoaded",this._animcoCartInit,null,this),(0,_a_events.addEvent)(document,"cartUpdate",this._animcoCartNotifier,null,this),this._handlePageLoad())}},{key:"updateCart",value:function updateCart(retriesValue){var _this2=this;D&&D.configuration&&D.configuration.urls&&D.configuration.urls.cart&&(this.toggleCartToggling(!0),(0,_a_utils.ajaxGet)({url:D.configuration.urls.cart,evalScripts:!0,retries:retriesValue||this._getRetriesValue(),beforeRetry:this._shouldRetryLastRequest,success:function success(htmlResponse){_this2.updateSelectors=!0,_this2._updateCartFragment(htmlResponse)},error:function error(){_this2.toggleCartToggling(!1)}}))}},{key:"_getRetriesValue",value:function _getRetriesValue(){return D.cart&&D.cart.config&&D.cart.config.fallback.enabled&&D.cart.config.fallback.retries?D.cart.config.fallback.retries:0}},{key:"_handleInputEnter",value:function _handleInputEnter(e){e.preventDefault();var el=(0,_a_utils.qs)(".product-update__input",{parent:e.matchingTarget});el&&el.dispatchEvent(new Event("change"))}},{key:"_updateCartFragment",value:function _updateCartFragment(html){var _this3=this;if(0==this.inProgressCartUpdateRequests.length){this.lastEmptyCartResponse=null;var cart=(0,_a_utils.qs)("#cart");if(cart)if(this._isCartLayerOpen()){var tmpEl=(0,_a_utils.createElement)("div",null,html),cartEl=(0,_a_utils.qs)("#cart",{cache:!1});if(tmpEl&&cartEl){var emptyCartContentEl=(0,_a_utils.qs)(".cart-content.no-products",{parent:tmpEl});if(!emptyCartContentEl)this._updateCartSummary(tmpEl,cartEl);else if(0==Object.getOwnPropertyNames(this._cartRemovalTimers).length){var oldCartContentEl=(0,_a_utils.qs)(".cart-content",{parent:cartEl,cache:!1});oldCartContentEl&&(oldCartContentEl.outerHTML=emptyCartContentEl.outerHTML)}else this.lastEmptyCartResponse=html,this._updateCartSummary(tmpEl,cartEl);this._updateCartHeader(tmpEl,cartEl)}}else cart.innerHTML=html}clearTimeout(this._loaderTimer),this._loaderTimer=setTimeout(function(){_this3._updateCartTotal()},1e3)}},{key:"_updateCartHeader",value:function _updateCartHeader(tmpEl,cartEl){var newCartHeaderEl=(0,_a_utils.qs)(".cart-header",{parent:tmpEl}),oldCartHeaderEl=(0,_a_utils.qs)(".cart-header",{parent:cartEl,cache:!1});oldCartHeaderEl&&newCartHeaderEl&&(oldCartHeaderEl.outerHTML=newCartHeaderEl.outerHTML);var newCartAnimcoEl=(0,_a_utils.qs)(".animcoCartContainer",{parent:tmpEl}),oldCartAnimcoEl=(0,_a_utils.qs)(".animcoCartContainer",{parent:cartEl,cache:!1});oldCartAnimcoEl&&newCartAnimcoEl&&(oldCartAnimcoEl.outerHTML=newCartAnimcoEl.outerHTML)}},{key:"_updateCartSummary",value:function _updateCartSummary(tmpEl,cartEl){var newCartSummaryEl=(0,_a_utils.qs)(".cart-summary",{parent:tmpEl}),oldCartSummaryEl=(0,_a_utils.qs)(".cart-summary",{parent:cartEl,cache:!1});oldCartSummaryEl&&(newCartSummaryEl?oldCartSummaryEl.outerHTML=newCartSummaryEl.outerHTML:oldCartSummaryEl.innerHTML="")}},{key:"_updateCartTotal",value:function _updateCartTotal(){if(0==this.inProgressCartUpdateRequests.length){clearTimeout(this._loaderTimer);var cartAmountEl=(0,_a_utils.qs)("#cartAmount",{cache:!1});cartAmountEl.innerHTML=D&&D.cart&&D.cart.cart&&D.cart.cart.totalAmount&&cartAmountEl?D.cart.cart.totalAmount.formattedValue:D.configuration.zeroFormattedPrice,this.toggleCartToggling(!1)}}},{key:"_handlePageLoad",value:function _handlePageLoad(){if(D&&D.cart&&D.cart.onLoadCallHasFailed){var retries=this._getRetriesValue();0<retries&&this.updateCart(retries-1)}else this._updateProductsQuantitySelectors()}},{key:"_updateProductsQuantitySelectors",value:function _updateProductsQuantitySelectors(event){var _this4=this;D&&D.cart&&D.cart.cart&&D.cart.cart.items&&(event&&"DOMUpdate"==event.type||this.updateSelectors)&&D.cart.cart.items.forEach(function(cartEntry){_this4._updateProductQuantitySelector(cartEntry.rideQuantity,cartEntry.cug)})}},{key:"_updateProductQuantitySelector",value:function _updateProductQuantitySelector(quantity,cug){var _this5=this;null!=quantity&&cug&&(0,_a_utils.qsAll)(".cart-updater-form[data-cug=\""+cug+"\"]",{cache:!1}).forEach(function(el){var quantityInputEl=(0,_a_utils.qs)(".product-update__input",{parent:el});quantityInputEl&&parseInt(quantityInputEl.value)!=quantity&&(quantityInputEl.value=quantity,_this5._handleQuantitySelectorDisplay(quantity,el))})}},{key:"_getLastKnownCartQuantity",value:function _getLastKnownCartQuantity(cug){if(D&&D.cart&&D.cart.cart&&D.cart.cart.items){var entry=D.cart.cart.items.filter(function(cartEntry){return cartEntry.cug==cug});if(0<entry.length)return entry[0].rideQuantity}return 0}},{key:"_removeFromCart",value:function _removeFromCart(event){event.preventDefault(),this._sendCartUpdateRequest(event.matchingTarget);var cartEntryContainerEl=(0,_a_utils.closest)(event.matchingTarget,".cart-product");if(cartEntryContainerEl){var parentEl=cartEntryContainerEl.parentElement,entriesContainerEl=(0,_a_utils.closest)(cartEntryContainerEl,".cart-products-list");if(null!=parentEl&&parentEl.removeChild(cartEntryContainerEl),entriesContainerEl&&1==entriesContainerEl.children.length){var outOfStockContainerEl=(0,_a_utils.closest)(entriesContainerEl,".cart-outOfStock");outOfStockContainerEl&&outOfStockContainerEl.parentElement.removeChild(outOfStockContainerEl)}}}},{key:"_startCartRemovalTimer",value:function _startCartRemovalTimer(cartEntryContainerEl){var _this6=this;if(cartEntryContainerEl&&cartEntryContainerEl.dataset.productId){var circleEl=(0,_a_utils.qs)("svg circle",{parent:cartEntryContainerEl});circleEl&&(circleEl.style["animation-duration"]=D.cart.config.removalTimeout+"s"),this._cartRemovalTimers[cartEntryContainerEl.dataset.productId]=setTimeout(function(){return _this6._updateCartAfterRemoval(cartEntryContainerEl)},D.cart.config.removalTimeout*this._MILLISECONDS_IN_A_SECOND)}}},{key:"_updateCartAfterRemoval",value:function _updateCartAfterRemoval(cartEntryContainerEl){delete this._cartRemovalTimers[cartEntryContainerEl.dataset.productId],this.lastEmptyCartResponse&&0==Object.getOwnPropertyNames(this._cartRemovalTimers).length?this._updateCartFragment(this.lastEmptyCartResponse):this._removeProductContainerFromCart(cartEntryContainerEl)}},{key:"_removeProductContainerFromCart",value:function _removeProductContainerFromCart(cartEntryContainerEl){cartEntryContainerEl&&cartEntryContainerEl.parentNode&&cartEntryContainerEl.parentNode.removeChild(cartEntryContainerEl)}},{key:"_cancelRemoveFromCart",value:function _cancelRemoveFromCart(event){clearTimeout(this._cartRemovalTimers[event.matchingTarget.dataset.productId]);var containerEl=(0,_a_utils.closest)(event.matchingTarget,".cart-product");if(null!=containerEl){var moreButtonEl=(0,_a_utils.qs)(".product-control__more",{parent:containerEl});moreButtonEl&&moreButtonEl.click()}}},{key:"_updateProductQuantity",value:function _updateProductQuantity(e){var productFormEl=(0,_a_utils.closest)(e.matchingTarget,"form.cart-updater-form"),buttonEl=e.matchingTarget;if(productFormEl){var productCounterEl=(0,_a_utils.qs)(".product-update__input",{parent:productFormEl});if(productCounterEl){var oldCounterValue=productCounterEl.value?parseInt(productCounterEl.value):0,maxQuantity=productFormEl.dataset.stock?parseInt(productFormEl.dataset.stock):-1,newValue=oldCounterValue;buttonEl.classList.contains("product-control__less")?newValue=0>=oldCounterValue?0:oldCounterValue-1:e.matchingTarget.classList.contains("product-control__more")&&(newValue=-1==maxQuantity||maxQuantity>oldCounterValue?oldCounterValue+1:maxQuantity),productCounterEl.value=newValue,this._handleQuantitySelectorDisplay(newValue,productFormEl),this._sendCartUpdateRequest(productFormEl);var cartProductEl=(0,_a_utils.closest)(productFormEl,".cart-product");if(cartProductEl&&0==newValue&&this._startCartRemovalTimer(cartProductEl),newValue>oldCounterValue){var displayNotification=0==oldCounterValue&&newValue>oldCounterValue&&(0,_a_utils.isTrue)(productFormEl.dataset.eligibleCoupon),addedQuantity=newValue-oldCounterValue;_budgetBoxUtils.BudgetBoxUtils.addItemToCart(productFormEl.dataset.cug,addedQuantity,displayNotification)}0<oldCounterValue&&0>=newValue&&_budgetBoxUtils.BudgetBoxUtils.deleteItemFromCart(productFormEl.dataset.cug,oldCounterValue)}}}},{key:"_handleQuantitySelectorDisplay",value:function _handleQuantitySelectorDisplay(quantity,formEl){if(formEl){formEl.dataset.quantity=quantity;var productControllersContainerEl=(0,_a_utils.closest)(formEl,".product-controls");if(productControllersContainerEl)if(0==quantity)productControllersContainerEl.classList.add("no-quantity");else{if(productControllersContainerEl.classList.remove("no-quantity"),1==quantity){var buttonEl=(0,_a_utils.qs)(".product-control__less",{parent:productControllersContainerEl,cache:!1});buttonEl&&buttonEl.dataset.trackingLabel&&buttonEl.setAttribute("data-tracking-label",D.configuration.deleteFromCart),productControllersContainerEl.classList.add("one-quantity")}else productControllersContainerEl.classList.remove("one-quantity");var maxQuantity=formEl.dataset.stock?parseInt(formEl.dataset.stock):-1;-1!=maxQuantity&&quantity==maxQuantity?productControllersContainerEl.classList.add("stock-max"):productControllersContainerEl.classList.remove("stock-max")}}}},{key:"_sendCartUpdateRequest",value:function _sendCartUpdateRequest(formEl){var _this7=this;formEl&&(clearTimeout(this.cartUpdateTimerRegistry[formEl.dataset.cug]),this.cartUpdateTimerRegistry[formEl.dataset.cug]=setTimeout(function(){_this7._addAwaitingRequest(formEl.dataset.cug);var quantityInputEl=(0,_a_utils.qs)(".product-update__input",{parent:formEl});quantityInputEl&&_this7._updateProductQuantitySelector(parseInt(quantityInputEl.value),formEl.dataset.cug),_this7.toggleCartToggling(!0);var cartUpdateEvent=_this7._buildCartUpdateEvent(formEl.dataset.cug,formEl.dataset.quantity);(0,_a_utils.ajaxForm)(formEl,{evalScripts:!0,retries:_this7._getRetriesValue(),beforeRetry:_this7._shouldRetryLastRequest,success:function success(htmlResponse){_this7.updateSelectors=!1,_this7._sendAddToCartTracking({id:formEl.dataset.cug,quantity:cartUpdateEvent.quantity,price:{amount:formEl.dataset.price}},cartUpdateEvent.name,formEl),_this7._removeAwaitingRequest(formEl.dataset.cug),_this7._updateCartFragment(htmlResponse)},error:function error(){_this7._removeAwaitingRequest(formEl.dataset.cug),_this7._updateProductQuantitySelector(_this7._getLastKnownCartQuantity(formEl.dataset.cug),formEl.dataset.cug),_this7.toggleCartToggling(!1)}})},500))}},{key:"_addList",value:function _addList(e){var _this8=this;e.preventDefault();var clonedFormEl=e.matchingTarget.cloneNode(!0),cart=this.getCart();if(clonedFormEl){clearTimeout(this.cartUpdateTimerRegistry[clonedFormEl.dataset.listId]),cart&&cart.items&&cart.items.forEach(function(cartEntry){(0,_a_utils.qsAll)("input[data-cug=\""+cartEntry.cug+"\"]",{parent:clonedFormEl,cache:!1}).forEach(function(input){input.parentNode.removeChild(input)})});var leftOverQuantity=(0,_a_utils.qsAll)("input.quantity",{parent:clonedFormEl,cache:!1});leftOverQuantity.length&&(leftOverQuantity.forEach(function(quantityEl){_this8._updateProductQuantitySelector(quantityEl.value,quantityEl.dataset.cug)}),this.cartUpdateTimerRegistry[clonedFormEl.dataset.listId]=setTimeout(function(){_this8._addAwaitingRequest(clonedFormEl.dataset.listId),_this8.toggleCartToggling(!0),(0,_a_utils.ajaxForm)(clonedFormEl,{evalScripts:!0,retries:_this8._getRetriesValue(),beforeRetry:_this8._shouldRetryLastRequest,success:function success(htmlResponse){_this8.updateSelectors=!1,_this8._removeAwaitingRequest(clonedFormEl.dataset.listId),_this8._updateCartFragment(htmlResponse)},error:function error(){_this8._removeAwaitingRequest(clonedFormEl.dataset.listId),_this8._restoreListProductControls(clonedFormEl),_this8.toggleCartToggling(!1)}})},500))}}},{key:"_restoreListProductControls",value:function _restoreListProductControls(clonedFormEl){var _this9=this;(0,_a_utils.qsAll)(".cug",{parent:clonedFormEl}).forEach(function(inputEl){var cug=inputEl.dataset.cug;_this9._updateProductQuantitySelector(_this9._getLastKnownCartQuantity(cug),cug)})}},{key:"_addAwaitingRequest",value:function _addAwaitingRequest(cug){cug&&this.inProgressCartUpdateRequests.push(cug)}},{key:"_removeAwaitingRequest",value:function _removeAwaitingRequest(cug){if(cug){var index=this.inProgressCartUpdateRequests.indexOf(cug);-1!=index&&this.inProgressCartUpdateRequests.splice(index,1)}}},{key:"_isCartLayerOpen",value:function _isCartLayerOpen(){return document.body.classList.contains("open-cart")}},{key:"_shouldRetryLastRequest",value:function _shouldRetryLastRequest(xhr){return xhr&&400!=xhr.status}},{key:"_animcoCartInit",value:function _animcoCartInit(){this._animcoEnabled=!!(0,_a_utils.qs)(".animco",{cache:!1})}},{key:"_animcoCartNotifier",value:function _animcoCartNotifier(){this._animcoCartInit();var animcoImgEl=(0,_a_utils.qs)(".animco__media-thumbnail",{cache:!1}),animcoContentEl=(0,_a_utils.qs)(".animco__content",{cache:!1});if(!0==this._animcoEnabled&&!this._isCartLayerOpen()&&animcoImgEl&&animcoContentEl){var animcoNotifier=new _a_notifier2.default,animcoImgUrl=animcoImgEl.src,animcoContent=animcoContentEl.outerHTML;animcoNotifier.addNotification("default",animcoImgUrl,animcoContent,null)}}},{key:"toggleCartToggling",value:function toggleCartToggling(display){var cartToggler=(0,_a_utils.qs)(".header__cart");cartToggler&&(display?cartToggler.classList.remove("cart-toggler"):cartToggler.classList.add("cart-toggler"))}},{key:"toggleCart",value:function toggleCart(){var cart=(0,_a_utils.qs)("#cart");cart&&document.body.classList.toggle("open-cart")}},{key:"getCart",value:function getCart(){return D.cart.cart}},{key:"_buildCartUpdateEvent",value:function _buildCartUpdateEvent(cug,newQty){var oldQty=this._getLastKnownCartQuantity(cug),eventName=newQty>oldQty?"ADD_TO_CART":"REMOVE_FROM_CART",addedQuantity=Math.abs(oldQty-newQty);return{name:eventName,quantity:addedQuantity}}},{key:"_sendAddToCartTracking",value:function _sendAddToCartTracking(trackedProduct,eventType,formEl){var area=(0,_a_utils.closest)(formEl,".track-area");area&&area.dataset.type&&D.cart.cart&&D.cart.cart.cartId&&this.trackingClient.sendCustomTrackingRequest({eventType:eventType,type:area.dataset.type,pageContext:{category:D.categoryId,products:[trackedProduct]},metadata:{listId:D.cart.cart.cartId}})}}]),Cart}();module.exports={Cart:new Cart};}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var WlecSession=function(){function WlecSession(){return _classCallCheck(this,WlecSession),window.D=window.D||{},window.D.wlecSession||(this.isInitialized=!1,window.D.wlecSession=this),window.D.wlecSession}return _createClass(WlecSession,[{key:"init",value:function init(){!this.isInitialized&&D.configuration.isFullyAuthenticated&&(D.wlecConfiguration?(this.isInitialized=!0,!(0,_a_utils.getCookie)(D.wlecConfiguration.name)&&this.extendSessionValidity()):console.error("Missing legacy configuration for session extension"))}},{key:"extendSessionValidity",value:function extendSessionValidity(){return this.isInitialized?void((0,_a_utils.addCookie)(D.wlecConfiguration.name,1,D.wlecConfiguration),(0,_a_utils.ajaxPost)({url:D.wlecConfiguration.sessionExtendUrl,data:{shopId:D.configuration.customerStoreId}})):void console.error("Please initialiazed the module first using init()")}}]),WlecSession}();module.exports={WlecSession:new WlecSession};}),,,,(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Carousel=void 0;var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1),_a_utils2=_interopRequireDefault(_a_utils),_a_events=__webpack_require__(3),_a_events2=_interopRequireDefault(_a_events);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Carousel=exports.Carousel=function(){function Carousel(){var _this=this;return _classCallCheck(this,Carousel),window.A=window.A||{},window.A.Carousel||(window.A.Carousel=this,this.scrollers=this._getScrollers(),this.scrollersAutoPlaySettings=[],this.isLeftToRight=!0,this.isScrolling=!1,this.defaultAutoplaySettings={interval:2500,timer:null},_a_events2.default.addEvent(document,"DOMUpdate",this._handleDomUpdate,null,this),_a_events2.default.addEvent(document,"mouseover",this._handleScrollerMouseEvent,".js-native-scroller.autoplay",this),_a_events2.default.addEvent(document,"mouseout",this._handleScrollerMouseEvent,".js-native-scroller.autoplay",this),_a_events2.default.addEvent(document,"click",this._handleAutoPlayNextButtonClick,".js-native-scroller.autoplay .controls label i",this),_a_events2.default.addEvent(document,"click",this._handleNextButtonClick,".js-native-scroller .controls label i",this),_a_events2.default.addEvent(document,"click",this._handleBulletClick,".js-native-scroller--step",this),this.scrollers.forEach(function(scroller){return _this._enableScrollerWhenScrollable(scroller)})),window.A.Carousel}return _createClass(Carousel,[{key:"_isInScroller",value:function _isInScroller(el){if(el){var rect=el.getBoundingClientRect(),scrollerWrapperEl=_a_utils2.default.closest(el,".js-native-scroller--wrapper");if(null!=scrollerWrapperEl)return parseInt(rect.left)>=parseInt(scrollerWrapperEl.getBoundingClientRect().left)&&parseInt(rect.right)<=parseInt(scrollerWrapperEl.getBoundingClientRect().width+scrollerWrapperEl.getBoundingClientRect().left)}return!1}},{key:"_scrollIntoElement",value:function _scrollIntoElement(targetEl,isAnimated){if(null!=targetEl){var parentScrollerWrapperEl=_a_utils2.default.closest(targetEl,".js-native-scroller--wrapper");if(parentScrollerWrapperEl){var activeScrollerEl=_a_utils2.default.qs(".js-native-scroller--item.active",{cache:!1});null!=activeScrollerEl&&activeScrollerEl.classList.remove("active"),targetEl.classList.add("active");var scrollerPosition=parentScrollerWrapperEl.scrollLeft,targetScrollPosition=0;targetScrollPosition=this.isLeftToRight?targetEl.offsetLeft:scrollerPosition-parentScrollerWrapperEl.getBoundingClientRect().left+targetEl.getBoundingClientRect().left-parentScrollerWrapperEl.clientWidth+targetEl.clientWidth,_a_utils2.default.isTrue(isAnimated)?_a_utils2.default.animate(parentScrollerWrapperEl,{scrollLeft:targetScrollPosition,callback:function callback(){this.isScrolling=!1}},150):(parentScrollerWrapperEl.scrollLeft=targetScrollPosition,this.isScrolling=!1)}}}},{key:"_getNextTargetItem",value:function _getNextTargetItem(scroller,isClickLeftToRight){var targetItem=null,hasAlreadySeenVisibleItems=!1;if(null!=scroller){for(var inScrollerFlag,children=_a_utils2.default.qsAll(".js-native-scroller--item",{parent:scroller,cache:!1}),i=children.length;i--;)if(inScrollerFlag=this._isInScroller(children[i]),isClickLeftToRight){if(inScrollerFlag&&i==children.length-1&&!this._isInScroller(children[0]))return this.isLeftToRight=!1,children[0];if(!inScrollerFlag)targetItem=children[i];else if(inScrollerFlag&&null!=targetItem)return this.isLeftToRight=!0,targetItem}else{if(0==i&&inScrollerFlag&&!this._isInScroller(children[children.length-1]))return this.isLeftToRight=!0,children[children.length-1];if(inScrollerFlag)hasAlreadySeenVisibleItems=!0;else if(!inScrollerFlag&&hasAlreadySeenVisibleItems)return this.isLeftToRight=!1,children[i]}if(!hasAlreadySeenVisibleItems&&0<children.length)return children[0]}return null}},{key:"_handleNextButtonClick",value:function _handleNextButtonClick(e){e.preventDefault(),e.stopPropagation();var labelEl=_a_utils2.default.closest(e.matchingTarget,"label"),isClickLeftToRight=!labelEl.matches(":first-of-type"),scrollerEl=_a_utils2.default.closest(e.matchingTarget,".js-native-scroller"),nextTargetItemEl=this._getNextTargetItem(scrollerEl,isClickLeftToRight);null==nextTargetItemEl||this.isScrolling||(this._scrollIntoElement(nextTargetItemEl,!0),this._updateBullets(scrollerEl,isClickLeftToRight))}},{key:"_enableScrollerWhenScrollable",value:function _enableScrollerWhenScrollable(scrollerEl){for(var children=_a_utils2.default.qsAll(".js-native-scroller--item",{parent:scrollerEl,cache:!1}),i=children.length;i--;)if(!this._isInScroller(children[i])){var mainScrollerEl=_a_utils2.default.closest(children[i],".js-native-scroller");if(null!=mainScrollerEl&&(mainScrollerEl.classList.add("active"),_a_utils2.default.isTrue(mainScrollerEl.dataset.autoplay))){mainScrollerEl.classList.add("autoplay");var settings=_a_utils2.default.extend(this.defaultAutoplaySettings,mainScrollerEl.dataset);settings.interval=parseInt(settings.interval);this.scrollersAutoPlaySettings.push({scrollerEl:mainScrollerEl,settings:settings}),this._startAutoPlay(mainScrollerEl)}break}null!=scrollerEl.parentElement.dataset.bullets&&this._addBulletsToScroller(scrollerEl)}},{key:"_getScrollerSettings",value:function _getScrollerSettings(mainScrollerEl){var scrollerSettings=this.scrollersAutoPlaySettings.filter(function(scrollerSettings){return scrollerSettings.scrollerEl===mainScrollerEl});return 0<scrollerSettings.length?scrollerSettings[0]:null}},{key:"_handleScrollerMouseEvent",value:function _handleScrollerMouseEvent(e){e.stopPropagation(),"mouseover"==e.type?this._stopAutoPlay(e.matchingTarget):"mouseout"==e.type&&this._startAutoPlay(e.matchingTarget)}},{key:"_handleAutoPlayNextButtonClick",value:function _handleAutoPlayNextButtonClick(e){this._startAutoPlay(_a_utils2.default.closest(e.matchingTarget,".js-native-scroller"))}},{key:"_startAutoPlay",value:function _startAutoPlay(mainScrollerEl){var scrollerSettings=this._getScrollerSettings(mainScrollerEl);null!=scrollerSettings&&(clearTimeout(scrollerSettings.settings.timer),scrollerSettings.settings.timer=setTimeout(function(){var nextButtonEl=_a_utils2.default.qs(".controls label:last-child i",{parent:mainScrollerEl});null!=nextButtonEl&&nextButtonEl.click()},scrollerSettings.settings.interval))}},{key:"_stopAutoPlay",value:function _stopAutoPlay(mainScrollerEl){var scrollerSettings=this._getScrollerSettings(mainScrollerEl);null!=scrollerSettings&&clearTimeout(scrollerSettings.settings.timer)}},{key:"_getScrollers",value:function _getScrollers(){return[].slice.call(_a_utils2.default.qsAll(".js-native-scroller--wrapper",{cache:!1})).filter(function(el){return _a_utils2.default.qsAll(".js-native-scroller--item",{parent:el,cache:!1}).length})}},{key:"_handleDomUpdate",value:function _handleDomUpdate(){var _this2=this,newScrollers=this._getScrollers();[].filter.call(newScrollers,function(scroller){return-1===_this2.scrollers.indexOf(scroller)}).forEach(function(scroller){return _this2._enableScrollerWhenScrollable(scroller)}),this.scrollers=this.scrollers.concat(newScrollers)}},{key:"_addBulletsToScroller",value:function _addBulletsToScroller(scrollerEl){var _this3=this,children=_a_utils2.default.qsAll(".js-native-scroller--item",{parent:scrollerEl,cache:!1});if(scrollerEl&&children.length){var index=[].findIndex.call(children,function(slide){return!_this3._isInScroller(slide)}),scrollerFooterBullets=Array(children.length/index).fill(null).map(function(item,index){var bulletStep=_a_utils2.default.createElement("span",{"data-index":index});return bulletStep.classList.add("js-native-scroller--step"),bulletStep});scrollerFooterBullets[0].classList.add("active"),_a_utils2.default.appendChilds(scrollerEl.parentElement.nextElementSibling,scrollerFooterBullets)}}},{key:"_updateBullets",value:function _updateBullets(scrollerEl,isClickLeftToRight){var bullets=_a_utils2.default.qsAll(".js-native-scroller--step",{cache:!1,parent:scrollerEl.parentElement}),indexActive=[].findIndex.call(bullets,function(bullet){return bullet.classList.contains("active")});if(-1!=indexActive){var indexToActive=isClickLeftToRight?(indexActive+1)%bullets.length:0>indexActive-1?bullets.length-1:indexActive-1;-1!=indexToActive&&(bullets[indexActive].classList.remove("active"),bullets[indexToActive].classList.add("active"))}}},{key:"_handleBulletClick",value:function _handleBulletClick(e){var _this4=this,stepsEl=_a_utils2.default.closest(e.matchingTarget,".js-native-scroller--steps"),scrollerEl=stepsEl?stepsEl.parentElement:null;if(scrollerEl){var slides=_a_utils2.default.qsAll(".js-native-scroller--item",{cache:!1,parent:scrollerEl}),nbSlideByView=[].filter.call(slides,function(slide){return _this4._isInScroller(slide)}).length,index=parseInt(e.matchingTarget.dataset.index);if(!this.isScrolling){this._scrollIntoElement(slides[index*nbSlideByView],!0);var steps=_a_utils2.default.qsAll(".js-native-scroller--step",{cache:!1,parent:stepsEl});[].filter.call(steps,function(step){return step.classList.contains("active")}).forEach(function(step){return step.classList.remove("active")}),e.matchingTarget.classList.add("active")}}}}]),Carousel}();}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1),_a_sso=__webpack_require__(26),_Cart=__webpack_require__(19),_WlecSession=__webpack_require__(20);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var RideSingleSignOn=function(){function RideSingleSignOn(){return _classCallCheck(this,RideSingleSignOn),window.D=window.D||{},window.D.rideSingleSignOn||(this.isInitialized=!1,_Cart.Cart.init(),window.D.rideSingleSignOn=this),window.D.rideSingleSignOn}return _createClass(RideSingleSignOn,[{key:"_onValidateAuthTokenSuccess",value:function _onValidateAuthTokenSuccess(){var _this=this;(0,_a_utils.ajaxGet)({url:D.sso.userAccountFragmentUrl,success:function success(response){return _this._updateAccountHeader(response)}}),_a_sso.SingleSignOn._validateSsoToken(null,function(response){return _this._doLegacyPropagation(response)})}},{key:"init",value:function init(onLegacyPropagationSuccess,onLegacyPropagationError){var _this2=this;if(D&&D.sso){this.onLegacyPropagationSuccess=onLegacyPropagationSuccess,this.onLegacyPropagationError=onLegacyPropagationError;var isNotInitialConnection=!(0,_a_utils.getCookie)(D.sso.applicationName+"_sso");_a_sso.SingleSignOn.configure(D.sso.applicationName,{onValidateAuthTokenSuccess:function onValidateAuthTokenSuccess(){return _this2._onValidateAuthTokenSuccess()},onValidateSsoTokenSuccess:function onValidateSsoTokenSuccess(response){return _this2._doLegacyPropagation(response)},validateSsoTokenUrl:D.sso.validateSsoTokenUrl,cookieDomain:D.sso.cookieDomain,contextPath:D.sso.contextPath,extendSsoTokenOnStatusCall:!0}),isNotInitialConnection&&_WlecSession.WlecSession.init()}}},{key:"_doLegacyPropagation",value:function _doLegacyPropagation(response){var _this3=this;response&&response.authToken&&(0,_a_utils.ajaxPost)({url:D.sso.legacyValidateAuthUrl,data:{shopId:D.configuration.customerStoreId,authToken:response.authToken},xhrFields:{withCredentials:!0},success:function success(){_Cart.Cart.updateCart(),_this3.onLegacyPropagationSuccess&&_this3.onLegacyPropagationSuccess()},error:function error(){_Cart.Cart.updateCart(),_this3.onLegacyPropagationError&&_this3.onLegacyPropagationError()}})}},{key:"_updateAccountHeader",value:function _updateAccountHeader(response){if(response){var accountEl=(0,_a_utils.qs)("#anonymousAccountLink"),headerAccountEl=(0,_a_utils.qs)(".header__account.account-widget-toggle"),accountContainerEl=(0,_a_utils.qs)(".account-container"),tmp=(0,_a_utils.createElement)("div",null,response);accountEl?([].slice.call(tmp.children).forEach(function(el){accountEl.parentElement.insertBefore(el,accountEl)}),accountEl.parentElement.removeChild(accountEl)):headerAccountEl&&accountContainerEl&&([].slice.call(tmp.children).forEach(function(el){headerAccountEl.parentElement.insertBefore(el,headerAccountEl)}),headerAccountEl.parentElement.removeChild(headerAccountEl),accountContainerEl.parentElement.removeChild(accountContainerEl))}}}]),RideSingleSignOn}();module.exports={RideSingleSignOn:new RideSingleSignOn};}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var SingleSignOn=function(){function SingleSignOn(){return _classCallCheck(this,SingleSignOn),window.A=window.A||{},window.A.SingleSignOnInstance||(this.APPLICATION_NAME_PATTERN=/^[a-zA-Z]{1}[a-zA-Z0-9]+$/g,this.VALIDATE_AUTH_TOKEN_METHODS={AJAX:1,WEB_FILTER:2},this._defaultConfig={ssoCookieSuffix:"_sso",noSsoCookieSuffix:"_noSso",ssoAuthCookieSuffix:"_ssoAuth",validateSsoTokenUrl:"https://api-qlf.auchan.net/websso/",validateAuthTokenUrlSuffix:"/sso/validateAuthToken/",ssoStatusUrlSuffix:"/sso/status",extendSsoTokenOnStatusCall:!1,validateAuthTokenMethod:this.VALIDATE_AUTH_TOKEN_METHODS.AJAX,contextPath:"/",cookieDomain:"",onValidateAuthTokenSuccess:null,onValidateSsoTokenSuccess:null,onLogout:null},window.A.SingleSignOnInstance=this),window.A.SingleSignOnInstance}return _createClass(SingleSignOn,[{key:"_getApplicationName",value:function _getApplicationName(){if(!this.applicationName)throw new Error("SingleSignOn as not been initialized");return this.applicationName}},{key:"_handleCurrentRequest",value:function _handleCurrentRequest(){var ssoCookieName=this._getApplicationName()+this.config.ssoCookieSuffix,ssoToken=(0,_a_utils.getCookie)(ssoCookieName);null==ssoToken?this._getSsoStatus():(this._validateSsoToken(ssoToken,this.config.onValidateSsoTokenSuccess),(0,_a_utils.removeCookie)(ssoCookieName,{path:this.config.contextPath,domain:this.config.cookieDomain}))}},{key:"_validateSsoToken",value:function _validateSsoToken(ssoToken,callback){var headers={"Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Headers":"ssotoken,Set-Cookie","Access-Control-Allow-Methods":"GET"};null!=ssoToken&&(headers.ssotoken=ssoToken),(0,_a_utils.ajaxGet)({url:this.config.validateSsoTokenUrl,dataType:"json",headers:headers,xhrFields:{withCredentials:!0},crossDomain:!0,success:callback})}},{key:"_getSsoStatus",value:function _getSsoStatus(){var _this=this,noSsoCookieValue=(0,_a_utils.getCookie)(this._getApplicationName()+this.config.noSsoCookieSuffix);(null==noSsoCookieValue||document.referrer&&!document.referrer.startsWith(location.origin))&&(0,_a_utils.ajaxGet)({dataType:"json",url:this._getContextualizedUrl(this.config.ssoStatusUrlSuffix),data:{extendSsoToken:this.config.extendSsoTokenOnStatusCall},success:function success(response){null!=response&&((0,_a_utils.isTrue)(response.logout)&&"function"==typeof _this.config.onLogout?_this.config.onLogout.call():!(0,_a_utils.isTrue)(response.logout)&&!(0,_a_utils.isTrue)(response.authenticated)&&_this._validateSsoToken(null,function(response){return _this._validateAuthToken(response)}))}})}},{key:"_getContextualizedUrl",value:function _getContextualizedUrl(url){return this._getContextPath()+(this._getContextPath().endsWith("/")?"":"/")+this._getApplicationName()+url}},{key:"_getContextPath",value:function _getContextPath(){return this.config.contextPath?this.config.contextPath:this._defaultConfig.contextPath}},{key:"_validateAuthToken",value:function _validateAuthToken(response){var _this2=this;null!=response&&(this.VALIDATE_AUTH_TOKEN_METHODS.WEB_FILTER==this.config.validateAuthTokenMethod?((0,_a_utils.addCookie)(this._getApplicationName()+this.config.ssoAuthCookieSuffix,response.authToken,{maxAge:0,path:this.config.contextPath,domain:this.config.cookieDomain}),"function"==typeof this.config.onValidateAuthTokenSuccess&&this.config.onValidateAuthTokenSuccess.call()):this.VALIDATE_AUTH_TOKEN_METHODS.AJAX==this.config.validateAuthTokenMethod&&(0,_a_utils.ajaxGet)({url:this._getContextualizedUrl(this.config.validateAuthTokenUrlSuffix+response.authToken),success:function success(response){(0,_a_utils.isTrue)(response)&&"function"==typeof _this2.config.onValidateAuthTokenSuccess&&_this2.config.onValidateAuthTokenSuccess.call()}}))}},{key:"configure",value:function configure(applicationName,customConfiguration){if(applicationName&&null==applicationName.match(this.APPLICATION_NAME_PATTERN))throw new Error("Invalid application name : Application name should match /^[a-zA-Z]{1}[a-zA-Z0-9]+$/g");this.config=(0,_a_utils.extend)(this._defaultConfig,customConfiguration),this.VALIDATE_AUTH_TOKEN_METHODS.WEB_FILTER==this.config.validateAuthTokenMethod&&"function"!=typeof this.config.onValidateAuthTokenSuccess&&(this.config.onValidateAuthTokenSuccess=function(){return location.reload()}),this.applicationName=applicationName,this._handleCurrentRequest()}}]),SingleSignOn}(),instance=new SingleSignOn;module.exports={SingleSignOn:instance};}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_modal=__webpack_require__(12),_a_utils=__webpack_require__(1),_a_events=__webpack_require__(3);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Tutorial=function(){function Tutorial(){_classCallCheck(this,Tutorial),this.init()}return _createClass(Tutorial,[{key:"init",value:function init(){var _this=this;(0,_a_events.addEvent)(document,"click",function(e){return _this._handleExplainMeClick(e)},".tutorial__actions-explain"),(0,_a_events.addEvent)(document,"click",function(){return(0,_modal.modalClose)()},".tutorial__actions-nothx")}},{key:"showTutorial",value:function showTutorial(){var modalShelve=(0,_a_utils.qs)(".modal",{cache:!1});if(modalShelve){var tutorialModal=(0,_a_utils.qs)(".tutorial",{parent:modalShelve,cache:!1});tutorialModal?(0,_modal.modalOpen)(null,tutorialModal):(0,_a_utils.ajaxGet)({url:"/modal/TUTORIAL",triggerDomUpdate:!0,success:function success(tutorialHtml){modalShelve.innerHTML+=tutorialHtml,tutorialModal=(0,_a_utils.qs)(".tutorial",{parent:modalShelve,cache:!1}),tutorialModal&&(0,_modal.modalOpen)(null,tutorialModal)}})}}},{key:"_handleExplainMeClick",value:function _handleExplainMeClick(e){var scrollerEl=(0,_a_utils.closest)(e.matchingTarget,".js-native-scroller");if(scrollerEl){var controlRight=(0,_a_utils.qs)(".icon-arrowRight",{cache:!1,parent:scrollerEl});controlRight&&controlRight.click()}}}]),Tutorial}();exports.default=Tutorial;}),,,,(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Polyfills=function Polyfills(){var _Stringprototype=String.prototype,_Mathfloor=Math.floor;_classCallCheck(this,Polyfills),Array.prototype.findIndex=Array.prototype.findIndex||function(callback){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");else if("function"!=typeof callback)throw new TypeError("callback must be a function");for(var list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(callback.call(thisArg,list[i],i,list))return i;return-1},Array.prototype.find=Array.prototype.find||function(callback){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");else if("function"!=typeof callback)throw new TypeError("callback must be a function");for(var element,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(element=list[i],callback.call(thisArg,element,i,list))return element},Array.from||(Array.from=function(){var toStr=Object.prototype.toString,isCallable=function(fn){return"function"==typeof fn||"[object Function]"===toStr.call(fn)},toInteger=function(value){var number=+value;return isNaN(number)?0:0!==number&&isFinite(number)?(0<number?1:-1)*_Mathfloor(Math.abs(number)):number},toLength=function(value){var len=toInteger(value);return Math.min(Math.max(len,0),9007199254740991)};return function(arrayLike){var C=this,items=Object(arrayLike);if(null==arrayLike)throw new TypeError("Array.from doit utiliser un objet semblable \xE0 un tableau - null ou undefined ne peuvent pas \xEAtre utilis\xE9s");var T,mapFn=1<arguments.length?arguments[1]:void 0;if("undefined"!=typeof mapFn){if(!isCallable(mapFn))throw new TypeError("Array.from: lorsqu il est utilis\xE9 le deuxi\xE8me argument doit \xEAtre une fonction");2<arguments.length&&(T=arguments[2])}for(var kValue,len=toLength(items.length),A=isCallable(C)?Object(new C(len)):Array(len),k=0;k<len;)kValue=items[k],A[k]=mapFn?"undefined"==typeof T?mapFn(kValue,k):mapFn.call(T,kValue,k):kValue,k+=1;return A.length=len,A}}()),_Stringprototype.endsWith||(_Stringprototype.endsWith=function(searchString,position){var subjectString=this.toString();("number"!=typeof position||!isFinite(position)||_Mathfloor(position)!==position||position>subjectString.length)&&(position=subjectString.length),position-=searchString.length;var lastIndex=subjectString.lastIndexOf(searchString,position);return-1!==lastIndex&&lastIndex===position}),function(arr){arr.forEach(function(item){item.hasOwnProperty("remove")||Object.defineProperty(item,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype])};exports.default=Polyfills;}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_events=__webpack_require__(3),_a_utils=__webpack_require__(1),_modal=__webpack_require__(12),_a_notifier=__webpack_require__(13),_a_notifier2=_interopRequireDefault(_a_notifier);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var ShoppingList=function(){function ShoppingList(){return _classCallCheck(this,ShoppingList),window.D=window.D||{},window.D.shoppingList||(this.isInitialized=!1,window.D.shoppingList=this),window.D.shoppingList}return _createClass(ShoppingList,[{key:"init",value:function init(){this.isInitialized||(this.domParser=new DOMParser,(0,_a_events.addEvent)(document,"click",this._addToShoppingList,".add-to-shoppinglist",this),(0,_a_events.addEvent)(document,"submit",this._submitAddToWishList,".addToShoppingListForm",this),(0,_a_events.addEvent)(document,"click",this._retrySubmitAddToWishList,".retry-create-list",this),this.isInitialized=!0)}},{key:"_appendAndOpenAddToWishListModal",value:function _appendAndOpenAddToWishListModal(htmlResponse,productId){if(htmlResponse){var domResponse=this.domParser.parseFromString(htmlResponse,"text/html");if(domResponse){var modalsContainer=(0,_a_utils.qs)(".modal"),newModal=(0,_a_utils.qs)(".modal-container",{parent:domResponse});if(modalsContainer&&newModal){(0,_a_utils.qsAll)("input[name=\"productId\"]",{parent:newModal}).forEach(function(input){return input.value=productId}),(0,_a_utils.qsAll)(".addToShoppingList-modal--button",{parent:newModal}).forEach(function(button){button.dataset.trakingLabel=productId,button.dataset.trakingAction=D.configuration.pageType});var addedElement=modalsContainer.appendChild(newModal);(0,_modal.modalOpen)(null,addedElement)}}}}},{key:"_addToShoppingList",value:function _addToShoppingList(e){var _this=this,productId=e.matchingTarget.dataset.productId;if(productId&&D.configuration.urls.shoppingListModalUrl){var productInputEl=(0,_a_utils.qs)(".createAndAddToShoppingList input[name=\"productId\"]");productInputEl&&(productInputEl.value=productId),(0,_a_utils.ajaxGet)({url:D.configuration.urls.shoppingListModalUrl,loader:!0,success:function success(htmlResponse){return _this._appendAndOpenAddToWishListModal(htmlResponse,productId)},error:function error(xhr){xhr&&401==xhr.status&&(window.location=D.configuration.urls.productHub)}})}}},{key:"_submitAddToWishList",value:function _submitAddToWishList(e){e.preventDefault();var notifier=new _a_notifier2.default,listNameInput=(0,_a_utils.qs)("[name='listName']",{cache:!1,parent:e.matchingTarget});if(listNameInput&&listNameInput.value){var listIdInput=(0,_a_utils.qs)("[name='listId']",{cache:!1,parent:e.matchingTarget}),submitBtn=listIdInput?null:(0,_a_utils.qs)(".createListBtn",{parent:e.matchingTarget});submitBtn&&(submitBtn.disabled="disabled"),(0,_a_utils.ajaxForm)(e.matchingTarget,{success:function success(){listIdInput||(notifier.addNotification("success","/images/list.png",D.notifications.messages.shoppingList.createListSuccess(listNameInput.value)),submitBtn&&(submitBtn.disabled=!1)),(0,_modal.modalClose)()},error:function error(){listIdInput||(notifier.addNotification("error","/images/list.png",D.notifications.messages.shoppingList.createListError(listNameInput.value)),submitBtn&&(submitBtn.disabled=!1))},triggerDomUpdate:!0})}}},{key:"_retrySubmitAddToWishList",value:function _retrySubmitAddToWishList(event){var isMyProducts=(0,_a_utils.qs)(".myproducts-main"),createListSubmit=null,createListInput=null;isMyProducts?(createListSubmit=(0,_a_utils.qs)(".createList .createListBtn",{cache:!1}),createListInput=(0,_a_utils.qs)(".createList .shoppinglist-name",{cache:!1})):(createListSubmit=(0,_a_utils.qs)(".createListBtn",{cache:!1}),createListInput=(0,_a_utils.qs)(".shoppinglist-name",{cache:!1})),createListSubmit&&createListInput&&(createListInput.value=event.matchingTarget.dataset.listName,createListSubmit.click())}}]),ShoppingList}();module.exports={ShoppingList:new ShoppingList};}),,(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.accountInit=void 0;var _a_events=__webpack_require__(3),_a_utils=__webpack_require__(1),toggleAccountLayer=function(){var accountLayer=(0,_a_utils.qs)(".account-layer");accountLayer&&document.body.classList.toggle("account--open")},accountInit=function(){(0,_a_events.addEvent)(document,"click",toggleAccountLayer,".account-widget-toggle")};exports.accountInit=accountInit;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_events=__webpack_require__(3),_a_utils=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Header=function(){function Header(){_classCallCheck(this,Header),this.isHeaderMinified=!1,this.scrollThreshold=210,this.scrollThresholdMinified=72,this.init()}return _createClass(Header,[{key:"init",value:function init(){var _this=this;(0,_a_events.addEvent)(document,"scroll",function(e){return _this.watchHeaderScrollTopValue(e.target.scrollingElement)}),(0,_a_events.addEvent)(document,"click",function(e){return _this.toggleWidgetStore(e)},".widget-store-toggler"),(0,_a_events.addEvent)(document,"click",function(e){return _this.toggleOpeningHours(e)},".store-open-hours-all"),setTimeout(function(){document.body.scrollTop&&_this.watchHeaderScrollTopValue(document.body)},0)}},{key:"watchHeaderScrollTopValue",value:function watchHeaderScrollTopValue(target){target&&(!this.isHeaderMinified&&target.scrollTop>=this.scrollThreshold?(document.body.classList.add("stickyHeader"),this.isHeaderMinified=!0):this.isHeaderMinified&&target.scrollTop<=this.scrollThresholdMinified&&(document.body.classList.remove("stickyHeader"),this.isHeaderMinified=!1))}},{key:"toggleWidgetStore",value:function toggleWidgetStore(e){var shopElement=(0,_a_utils.qs)(".header__identity-pointOfService");shopElement&&(e.matchingTarget!=document.body||!(0,_a_utils.closest)(e.target,".header__identity-pointOfService"))&&(shopElement.classList.contains("open-widget")?document.body.classList.remove("widget-store-toggler"):document.body.classList.add("widget-store-toggler"),shopElement.classList.toggle("open-widget"))}},{key:"toggleOpeningHours",value:function toggleOpeningHours(e){e.matchingTarget.classList.toggle("opened")}}]),Header}();exports.default=Header;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchInit=void 0;var _a_utils=__webpack_require__(1),_a_events=__webpack_require__(3),_a_vocalsearch=__webpack_require__(37),searchSuggest=function(){var searchInputClass=".header__search-input",threeChars="???",arrowDown=40,timer=null,showSuggests=function(keyword){var suggests=(0,_a_utils.qs)(".suggest__layer");suggests&&(clearTimeout(timer),timer=setTimeout(function(){callAsyncSuggest(keyword,function(data,err){err?console.error(err):suggests.innerHTML=data})},300))},searchFocusIn=function(e){document.body.classList.add("search--focus"),(0,_a_events.addEvent)(document,"click",searchClickOutside),0===e.matchingTarget.value.length&&showSuggests(threeChars)},searchFocusOut=function(){document.body.classList.remove("search--focus");var searchInput=(0,_a_utils.qs)(searchInputClass);searchInput&&searchInput.blur()},searchClickOutside=function(evt){var searchForm=(0,_a_utils.qs)(".header__search"),searchLayer=(0,_a_utils.qs)(".suggest__layer"),targetElement=evt.target;do{if(targetElement===searchForm||targetElement===searchLayer)return!1;targetElement=targetElement.parentNode}while(targetElement);searchFocusOut()};(0,_a_events.addEvent)(document,"focus",searchFocusIn,searchInputClass),(0,_a_events.addEvent)(document,"focusin",searchFocusIn,searchInputClass),(0,_a_events.addEvent)(document,"click",function searchMobileOpen(e){var searchInput=(0,_a_utils.qs)(searchInputClass);searchFocusIn(e),searchInput&&searchInput.focus()},".search-submit"),(0,_a_events.addEvent)(document,"keyup",function searchEnter(e){var searchInputVal=removeBreakingChars(e.matchingTarget.value||""),keyCode=e.which,showSuggest=function(){var searchForm=(0,_a_utils.qs)(".header__search");0===searchInputVal.length&&searchForm?searchForm.classList.remove("search--nonempty"):0<searchInputVal.length&&3>searchInputVal.length&&searchForm?(showSuggests(threeChars),searchForm.classList.add("search--nonempty")):searchForm&&(showSuggests(searchInputVal),searchForm.classList.add("search--nonempty"))};switch(keyCode){case arrowDown:{var suggestLink=(0,_a_utils.qs)(".suggest__keyword-link",{cache:!1}),popularLink=(0,_a_utils.qs)(".suggest__popular-link",{cache:!1});suggestLink&&0<e.matchingTarget.value.length&&suggestLink.focus(),popularLink&&0===e.matchingTarget.value.length&&popularLink.focus();break}default:showSuggest();}},searchInputClass),(0,_a_events.addEvent)(document,"click",function searchClear(){var searchForm=(0,_a_utils.qs)(".header__search"),searchInput=(0,_a_utils.qs)(searchInputClass);searchInput&&searchForm&&(searchInput.value="",searchInput.focus(),searchForm.classList.remove("search--nonempty"))},".search-clear"),(0,_a_events.addEvent)(document,"click",function searchCancel(){var searchForm=(0,_a_utils.qs)(".header__search"),searchInput=(0,_a_utils.qs)(searchInputClass);searchInput&&searchForm&&(searchInput.value="",searchFocusOut(),searchForm.classList.remove("search--nonempty"))},".header__search-cancel"),(0,_a_events.addEvent)(document,"click",searchFocusOut,".search-overlay"),(0,_a_events.addEvent)(document,"keyup",function searchNavigation(){var focusedLink=document.activeElement;event.which===arrowDown&&focusedLink.nextElementSibling&&focusedLink.nextElementSibling.focus(),event.which===38&&focusedLink.previousElementSibling&&focusedLink.previousElementSibling.focus()},".suggest__list-link")},callAsyncSuggest=function(query,cb){"function"==typeof cb&&(0,_a_utils.ajaxGet)({url:"/suggest",triggerDomUpdate:!0,data:{search:query||""},success:function success(data){return cb(data,null)},error:function error(err){return cb(null,err)}})},redirectSearchPage=function(){var searchInput=(0,_a_utils.qs)(".header__search-input");searchInput&&(window.location="/recherche/"+removeBreakingChars(searchInput.value))},redirectSearchPageAfterSubmit=function(event){event.preventDefault(),redirectSearchPage()},searchOnSubmit=function(){(0,_a_events.addEvent)(document,"submit",redirectSearchPageAfterSubmit,".header__search-form")},searchInit=function(){searchSuggest(),searchOnSubmit(),window.hasOwnProperty("webkitSpeechRecognition")&&new _a_vocalsearch.VocalSearch(".search-vocal",".header__search-input",redirectSearchPage)},removeBreakingChars=function(searchValue){return searchValue.replace(/[;///?~%]/g,"")};exports.searchInit=searchInit;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VocalSearch=void 0;var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_events=__webpack_require__(3),_a_utils=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var VocalSearch=exports.VocalSearch=function(){function VocalSearch(searchButtonQuerySelector,searchInputQuerySelector,onFinalSearchResultCallback){if(_classCallCheck(this,VocalSearch),searchButtonQuerySelector&&searchInputQuerySelector&&onFinalSearchResultCallback)window.hasOwnProperty("webkitSpeechRecognition")&&(this.searchButtonQuerySelector=searchButtonQuerySelector,this.searchInputQuerySelector=searchInputQuerySelector,this.onFinalSearchResultCallback=onFinalSearchResultCallback,this.defaultConfig={lang:"FR-fr"},this._init());else throw new Error("searchButtonQuerySelector, searchInputQuerySelector and onFinalSearchResultCallback are mandatory")}return _createClass(VocalSearch,[{key:"_addEvents",value:function _addEvents(){var _this=this;(0,_a_events.addEvent)(document,"click",function(){return _this._toggleVocalSearch()},this.searchButtonQuerySelector)}},{key:"_toggleVocalSearch",value:function _toggleVocalSearch(){!1==this.isSpeechRecognitionInProgress?this.speechRecognitionInstance.start():this.speechRecognitionInstance.stop()}},{key:"_vocalSearchOnResult",value:function _vocalSearchOnResult(e){var _this2=this,results=[].slice.call(e.results),inputEl=(0,_a_utils.qs)(this.searchInputQuerySelector);inputEl&&(inputEl.value="",results.forEach(function(result){"function"==typeof _this2.onFinalSearchResultCallback&&(result.isFinal?(inputEl.value=result[0].transcript,_this2.speechRecognitionInstance.stop(),setTimeout(function(){_this2.onFinalSearchResultCallback.call(null,e)},800)):"function"==typeof _this2.onSearchResultCallback&&(inputEl.value=result[0].transcript))}))}},{key:"_vocalSearchOnStart",value:function _vocalSearchOnStart(){this.vocalSearchButtonEl.classList.add("active"),this.isSpeechRecognitionInProgress=!0}},{key:"_vocalSearchOnEnd",value:function _vocalSearchOnEnd(){this.vocalSearchButtonEl.classList.remove("active"),this.isSpeechRecognitionInProgress=!1}},{key:"_vocalSearchOnError",value:function _vocalSearchOnError(){this.isSpeechRecognitionInProgress=!1,this.speechRecognitionInstance.stop()}},{key:"_init",value:function _init(){var _this3=this,settings=(0,_a_utils.extend)({},this.defaultConfig);this.vocalSearchButtonEl=(0,_a_utils.qs)(this.searchButtonQuerySelector),this.vocalSearchButtonEl&&this.vocalSearchButtonEl.classList.contains("hidden")&&(this.vocalSearchButtonEl.classList.remove("hidden"),this.speechRecognitionInstance=new webkitSpeechRecognition,this.speechRecognitionInstance.continuous=!0,this.speechRecognitionInstance.interimResults=!0,this.speechRecognitionInstance.lang=settings.lang,this.speechRecognitionInstance.onresult=function(e){return _this3._vocalSearchOnResult(e)},this.speechRecognitionInstance.onstart=function(){return _this3._vocalSearchOnStart()},this.speechRecognitionInstance.onend=function(){return _this3._vocalSearchOnEnd()},this.speechRecognitionInstance.onerror=function(){return _this3._vocalSearchOnError()},this.isSpeechRecognitionInProgress=!1,this._addEvents())}}]),VocalSearch}();}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1),_a_carousel=__webpack_require__(24),_Tutorial=__webpack_require__(27),_Tutorial2=_interopRequireDefault(_Tutorial);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Homepage=function(){function Homepage(){_classCallCheck(this,Homepage),this.init()}return _createClass(Homepage,[{key:"init",value:function init(){this.carousel=new _a_carousel.Carousel,this.tutorial=new _Tutorial2.default,window.showTutorial=this.tutorial.showTutorial,this.populateCarrousels()}},{key:"populateCarrousels",value:function populateCarrousels(){var carousels=(0,_a_utils.qsAll)(".carousel");carousels&&carousels.forEach(function(carousel){var carouselData=carousel.dataset,carouselItems=(0,_a_utils.qs)(".carousel__items",{parent:carousel});carouselItems&&carouselData.request&&(0,_a_utils.ajaxGet)({url:carouselData.request,triggerDomUpdate:!0,success:function success(data){carouselItems.innerHTML=data,5>carouselItems.children.length&&carousel.parentElement.remove()},error:function error(){return carousel.parentElement.remove()}})})}}]),Homepage}();exports.default=Homepage;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackingInit=void 0;var _a_tracking=__webpack_require__(40),_a_tracking2=_interopRequireDefault(_a_tracking);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var trackingInit=function(){D.tracking=_a_tracking2.default.getInstance("dataLayer",D.configuration.pageType||"")};exports.trackingInit=trackingInit;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1),_a_utils2=_interopRequireDefault(_a_utils),_a_events=__webpack_require__(3),_a_events2=_interopRequireDefault(_a_events);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Tracking=function(){function Tracking(dataLayerName,pageType){_classCallCheck(this,Tracking),this.pageType=pageType;this.ECOMMERCE_TRACK_TYPES={PRODUCT:"product",PROMOTION:"promotion"},window[dataLayerName]=window[dataLayerName]||[],this.dataLayer=window[dataLayerName]}return _createClass(Tracking,null,[{key:"getInstance",value:function getInstance(dataLayerName,pageType){return this.instance||(this.instance=new Tracking(dataLayerName,pageType),this.instance._initTrackingEvents()),this.instance}}]),_createClass(Tracking,[{key:"_initTrackingEvents",value:function _initTrackingEvents(){var _this=this;_a_events2.default.addEvent(document,"click",function(e){return _this._trackClickEvent(e)},"a, button, .track"),_a_events2.default.addEvent(document,"submit",function(e){return _this._trackFormEvent(e)},"form"),_a_events2.default.addEvent(document,"DOMUpdate",function(e){return _this._trackDOMUpdateEvent(e)})}},{key:"_trackClickEvent",value:function _trackClickEvent(e){var trackedEl=e.matchingTarget;if(trackedEl){var ecommerceInformation={},eventInformation={};this._getBasicEventInformation(eventInformation,trackedEl);var trackType=this._getEcommerceTrackingType(_a_utils2.default.closest(trackedEl,"[data-track-type][data-track-container]"));if(trackType){var childElementEl=null;childElementEl="trackElement"in trackedEl.dataset?trackedEl:_a_utils2.default.closest(trackedEl,"[data-track-element]"),childElementEl&&trackType===this.ECOMMERCE_TRACK_TYPES.PRODUCT&&this._getProductClickInformation(ecommerceInformation,childElementEl),childElementEl&&trackType===this.ECOMMERCE_TRACK_TYPES.PROMOTION&&this._getPromotionClickInformation(ecommerceInformation,childElementEl)}this._pushEvent([eventInformation],ecommerceInformation,e.type)}}},{key:"_trackFormEvent",value:function _trackFormEvent(e){var eventInformation={},trackedEl=e.matchingTarget;trackedEl&&(this._getBasicEventInformation(eventInformation,trackedEl),this._getFormEventInformation(eventInformation,trackedEl),this._pushEvent([eventInformation],{},e.type))}},{key:"_trackDOMUpdateEvent",value:function _trackDOMUpdateEvent(e){var trackedEl=e.detail;trackedEl&&this.trackDOMUpdateElements(trackedEl)}},{key:"trackDOMUpdateElements",value:function trackDOMUpdateElements(containerEl){if(containerEl){var parentContainer=containerEl.parentNode||containerEl,parentEls=_a_utils2.default.qsAll("[data-track-container]",{parent:parentContainer});if(parentEls.length){var eventListInformation=[],ecommerceInformation={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=parentEls[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var parentEl=_step.value,eventInformation={};this._getBasicEventInformation(eventInformation,parentEl);var childEls=_a_utils2.default.qsAll("[data-track-element]",{parent:parentEl});if(childEls.length){var trackType=this._getEcommerceTrackingType(parentEl);eventInformation.children=[];var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=childEls[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var childEl=_step2.value,childInformation=_a_utils2.default.extend({},childEl.dataset);eventInformation.children.push(childInformation),trackType&&(trackType===this.ECOMMERCE_TRACK_TYPES.PRODUCT&&this._getProductImpressionInformation(ecommerceInformation,childEl),trackType===this.ECOMMERCE_TRACK_TYPES.PROMOTION&&this._getPromotionImpressionInformation(ecommerceInformation,childEl))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}eventListInformation.push(eventInformation)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this._pushEvent(eventListInformation,ecommerceInformation,"DOMUpdate")}}}},{key:"_pushEvent",value:function _pushEvent(eventInformation,ecommerceInformation,eventType){this.dataLayer&&this.dataLayer.push({event:"analytics","event-page":this.pageType,"event-type":eventType,"event-information":eventInformation,ecommerce:ecommerceInformation})}},{key:"_getBasicEventInformation",value:function _getBasicEventInformation(eventInformation,trackedEl){var dataSet={trackingAction:void 0,trackingCategory:void 0,trackingEvent:void 0,trackingLabel:void 0};if(trackedEl&&eventInformation){eventInformation.label=trackedEl.dataset.trackingLabel||trackedEl.innerText,dataSet.trackingAction=this._getDataAreaElement(trackedEl),eventInformation.area=[],dataSet=_a_utils2.default.extend({},trackedEl.dataset);for(var dataAreaEl=this._getDataAreaElement(trackedEl);dataAreaEl;)eventInformation.area.unshift(dataAreaEl.dataset.area),dataSet=_a_utils2.default.extend(dataSet,dataAreaEl.dataset),dataAreaEl="areaParent"in dataAreaEl.dataset&&"false"===dataAreaEl.dataset.areaParent?null:this._getDataAreaElement(dataAreaEl);eventInformation.dataset=dataSet}return eventInformation}},{key:"_getProductImpressionInformation",value:function _getProductImpressionInformation(ecommerceInformation,productEl){if(productEl&&ecommerceInformation){var productImpression={};productImpression.id=this._getProductId(productEl),productImpression.position=this._getPosition(productEl),productImpression.list=this._getArea(productEl),ecommerceInformation.impressions=ecommerceInformation.impressions||[],ecommerceInformation.impressions.push(productImpression)}return ecommerceInformation}},{key:"_getProductClickInformation",value:function _getProductClickInformation(ecommerceInformation,productEl){if(productEl&&ecommerceInformation){var productClick={id:this._getProductId(productEl),position:this._getPosition(productEl)},productAction={};productAction.list=this._getArea(productEl),ecommerceInformation.click=ecommerceInformation.click||{},ecommerceInformation.click.products=ecommerceInformation.click.products||[],ecommerceInformation.click.products.push(productClick),ecommerceInformation.click.actionField=productAction}return ecommerceInformation}},{key:"_getPromotionImpressionInformation",value:function _getPromotionImpressionInformation(ecommerceInformation,promotionEl){if(promotionEl&&ecommerceInformation){var promotionImpression={};promotionImpression.id=this._getPromotionId(promotionEl),promotionImpression.name=this._getTrackingLabel(promotionEl),promotionImpression.position=this._getArea(promotionEl),ecommerceInformation.promoView=ecommerceInformation.promoView||{},ecommerceInformation.promoView.promotions=ecommerceInformation.promoView.promotions||[],ecommerceInformation.promoView.promotions.push(promotionImpression)}return ecommerceInformation}},{key:"_getPromotionClickInformation",value:function _getPromotionClickInformation(ecommerceInformation,promotionEl){if(promotionEl&&ecommerceInformation){var promotionClick={};promotionClick.id=this._getPromotionId(promotionEl),promotionClick.name=this._getTrackingLabel(promotionEl),promotionClick.position=this._getArea(promotionEl),ecommerceInformation.promoClick=ecommerceInformation.promoClick||{},ecommerceInformation.promoClick.promotions=ecommerceInformation.promoClick.promotions||[],ecommerceInformation.promoClick.promotions.push(promotionClick)}return ecommerceInformation}},{key:"_getFormEventInformation",value:function _getFormEventInformation(eventInformation,formEl){if(formEl&&eventInformation){var inputEls=[].filter.call(formEl.elements,function(el){return("checkbox"!==el.type&&"radio"!==el.type||el.checked)&&"password"!==el.type}).filter(function(el){return el.name&&!("doNotTrack"in el.dataset)}).map(function(el){return{type:el.getAttribute("type"),name:el.getAttribute("name"),value:el.value}});eventInformation.form=inputEls}return eventInformation}},{key:"_getEcommerceTrackingType",value:function _getEcommerceTrackingType(element){if(element&&"trackType"in element.dataset){var ecommerceTrackingType=element.dataset.trackType;if(ecommerceTrackingType){if("product"===ecommerceTrackingType)return this.ECOMMERCE_TRACK_TYPES.PRODUCT;if("promotion"===ecommerceTrackingType)return this.ECOMMERCE_TRACK_TYPES.PROMOTION}}return null}},{key:"_getProductId",value:function _getProductId(element){return element&&"productId"in element.dataset?element.dataset.productId:null}},{key:"_getPromotionId",value:function _getPromotionId(element){return element&&"promotionId"in element.dataset?element.dataset.promotionId:null}},{key:"_getTrackingLabel",value:function _getTrackingLabel(element){return element&&"trackingLabel"in element.dataset?element.dataset.trackingLabel:null}},{key:"_getPosition",value:function _getPosition(element){return element&&"position"in element.dataset?element.dataset.position:null}},{key:"_getArea",value:function _getArea(element){var dataAreaEl=this._getDataAreaElement(element);if(dataAreaEl&&"area"in dataAreaEl.dataset)return dataAreaEl.dataset.area}},{key:"_getDataAreaElement",value:function _getDataAreaElement(element){return element?_a_utils2.default.closest(element,"[data-area]"):null}}]),Tracking}();exports.default=Tracking;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_larkMerchandisingClient=__webpack_require__(42),_larkMerchandisingClient2=_interopRequireDefault(_larkMerchandisingClient),_a_utils=__webpack_require__(1),_larkTrackingClient=__webpack_require__(16),_larkTrackingClient2=_interopRequireDefault(_larkTrackingClient);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Merchandising=function(){function Merchandising(){_classCallCheck(this,Merchandising),this.init()}return _createClass(Merchandising,[{key:"_buildConfigurationObject",value:function _buildConfigurationObject(){return{context:{cartItems:this._buildCartItemsConf(),pageContext:{products:this._getAllproducts(),type:D.pageContext,keywords:D.keywords,category:D.categoryId},userContext:{id:D.configuration.userId,stores:[D.configuration.customerStoreId]}}}}},{key:"init",value:function init(){var basicConfigurationObject=this._buildConfigurationObject();this.trackingClient=new _larkTrackingClient2.default((0,_a_utils.extend)(basicConfigurationObject,{config:{endpoint:D.configuration.trackingApiUrl}})),this.merchandisingClient=new _larkMerchandisingClient2.default((0,_a_utils.extend)(basicConfigurationObject,{config:{endpoint:D.configuration.merchandisingRendererUrl,listenDOMUpdate:!0,triggerDOMUpdateEvent:!0},trackingConfig:{endpoint:D.configuration.trackingApiUrl}}))}},{key:"_buildCartItemsConf",value:function _buildCartItemsConf(){var cartItems=[];return D&&D.cart&&D.cart.cart&&D.cart.cart.items&&(cartItems=D.cart.cart.items.filter(function(el){return el&&el.cug}).map(function(el){return{id:el.cug}})),cartItems}},{key:"_getAllproducts",value:function _getAllproducts(){var products=[];return(0,_a_utils.qsAll)(".product-item").forEach(function(el){if(el){var product={};if(el.dataset.productId&&(product.id=el.dataset.productId),el.dataset.inStock&&(product.inStock=(0,_a_utils.isTrue)(el.dataset.inStock)),el.dataset.price){var price={};price.amount=el.dataset.price.replace(",",""),price.currency="EUR",product.price=price}products.push(product)}}),products}}]),Merchandising}();exports.default=Merchandising;}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_larkContextLib=__webpack_require__(17),_larkContextLib2=_interopRequireDefault(_larkContextLib),_a_events=__webpack_require__(3),_a_utils=__webpack_require__(1),_larkTrackingClient=__webpack_require__(16),_larkTrackingClient2=_interopRequireDefault(_larkTrackingClient);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var MerchandisingClient=function(){function MerchandisingClient(settings){return _classCallCheck(this,MerchandisingClient),window.merchandisingClientInstance||(window.merchandisingClientInstance=this,this._init(settings)),window.merchandisingClientInstance}return _createClass(MerchandisingClient,[{key:"_init",value:function _init(settings){var _this=this,incomingContext=settings&&settings.context?settings.context:{},incomingConfiguration=settings&&settings.config?settings.config:{},incomingTrackingConfiguration=settings&&settings.trackingConfig?settings.trackingConfig:{};this.basicContextInstance=new _larkContextLib2.default(incomingContext),this.DOMParser=new DOMParser,this.trackingClient=new _larkTrackingClient2.default({config:incomingTrackingConfiguration}),this.merchandisingAreasElements=[],this.merchandisingRegistry=[],this.filledUpAreaRegistry=[],this.configuration=(0,_a_utils.extend)({merchandisingAreaQuerySelector:".merchandising--area",triggerDOMUpdateEvent:!1,listenDOMUpdate:!1,endpoint:"https://merchandising-renderer.lark.auchanlab.com",context:"/context"},incomingConfiguration),this._updateAreasListAndSendRequest(),(0,_a_utils.isTrue)(this.configuration.listenDOMUpdate)&&(0,_a_events.addEvent)(document,"DOMUpdate",function(){return _this._updateAreasListAndSendRequest()})}},{key:"updateContext",value:function updateContext(updatedContext){this.basicContextInstance.updateContext(updatedContext)}},{key:"_updateAreasListAndSendRequest",value:function _updateAreasListAndSendRequest(){this._updateMerchandisingAreasList(),this._sendContext()}},{key:"_updateMerchandisingAreasList",value:function _updateMerchandisingAreasList(){var _this2=this;[].slice.call((0,_a_utils.qsAll)(this.configuration.merchandisingAreaQuerySelector,{cache:!1})).filter(function(el){return-1===_this2.merchandisingAreasElements.indexOf(el)}).filter(function(el){var isLimitValid=!1;try{isLimitValid=!el.dataset.limit||parseInt(el.dataset.limit)}catch(error){}return isLimitValid&&el.dataset.type&&el.dataset.query||(console.error("Bad merchandising area configuration, ignoring this area",el,!el.dataset.limit),!1)}).forEach(function(el){_this2.merchandisingAreasElements.push(el)})}},{key:"_sendContext",value:function _sendContext(){var _this3=this,unhandledAreas=[];this.merchandisingAreasElements.forEach(function(el){if(0==_this3.merchandisingRegistry.filter(function(entry){return el==entry.element}).length){var entry=_this3._convertAreaElement(el);unhandledAreas.push(entry),_this3.merchandisingRegistry.push((0,_a_utils.extend)(entry,{element:el}))}});var areasForRequest=this._prepareAreasForRequest(unhandledAreas);if(0<areasForRequest.length){var requestBody=(0,_a_utils.extend)(this.basicContextInstance.getContext(),{language:"fre",pageContext:{areas:areasForRequest}});(0,_a_utils.ajaxPost)({url:this.configuration.endpoint+this.configuration.context,data:JSON.stringify(requestBody),xhrFields:{withCredentials:!0},enctype:"application/json",serialize:!1,success:function success(){return _this3._openMerchandisingEventSource()}})}}},{key:"_openMerchandisingEventSource",value:function _openMerchandisingEventSource(){var _this4=this,merchandisingEventSource=new EventSource(this.configuration.endpoint,{withCredentials:!0});(0,_a_events.addEvent)(merchandisingEventSource,"message",function(e){return _this4._handleServerMessage(e)}),(0,_a_events.addEvent)(merchandisingEventSource,"error",function(e){return _this4._handleServerConnectionClose(e)})}},{key:"_prepareAreasForRequest",value:function _prepareAreasForRequest(unhandledAreas){var areasForRequest=[];return unhandledAreas.forEach(function(area){var filteredAreas=areasForRequest.filter(function(a){return a.type==area.type&&a.query==area.query});0<filteredAreas.length?-1==filteredAreas[0].limit||-1==area.limit?filteredAreas[0].limit=-1:filteredAreas[0].limit+=area.limit:areasForRequest.push(area)}),areasForRequest}},{key:"_convertAreaElement",value:function _convertAreaElement(area){var isSplitted=(0,_a_utils.isTrue)(area.dataset.splitted),limit=null==area.dataset.limit?isSplitted?1:-1:parseInt(area.dataset.limit);return{type:area.dataset.type,query:area.dataset.query,splitted:isSplitted,limit:limit}}},{key:"_handleServerMessage",value:function _handleServerMessage(e){var _this5=this;try{var response=JSON.parse(e.data);response&&(this.updateContext({uuid:response.uuid}),response.areas&&(response.areas.forEach(function(area){if(area.html){var registryEntries=_this5.merchandisingRegistry.filter(function(a){return a.type==response.type&&a.query==area.query&&-1===_this5.filledUpAreaRegistry.indexOf(a.element)});_this5._dispatchResultsInMatchingAreas(registryEntries,area)}}),this.merchandisingRegistry.filter(function(a){return a.type==response.type&&-1===_this5.filledUpAreaRegistry.indexOf(a.element)}).forEach(function(entry){entry.element.parentElement.removeChild(entry.element),_this5.filledUpAreaRegistry.push(entry.element)}),this.trackingClient.sendCustomTrackingRequest({type:response.type,eventType:this.trackingClient.config.eventTypes.LOAD,metadata:response.metadata})))}catch(error){console.error("Cannot parse response",e.data)}}},{key:"_dispatchResultsInMatchingAreas",value:function _dispatchResultsInMatchingAreas(registryEntries,area){if(1==registryEntries.length&&-1==registryEntries[0].limit)registryEntries[0].element.innerHTML=area.html,this.filledUpAreaRegistry.push(registryEntries[0].element),this._addMetadataAsDataSet(registryEntries[0],area.metadata),this._dispatchDOMUpdate(registryEntries[0].element);else if(1<=registryEntries.length){var parentNode=this.DOMParser.parseFromString(area.html,"text/html");if(parentNode)for(var children=[].slice.call(parentNode.body.children),registryIndex=0,childrenIndex=0;registryIndex<registryEntries.length&&childrenIndex<children.length;registryIndex++){for(var addedChildrenCount=0;childrenIndex<children.length&&(-1==registryEntries[registryIndex].limit||addedChildrenCount<registryEntries[registryIndex].limit);childrenIndex++)0==addedChildrenCount&&(registryEntries[registryIndex].element.innerHTML=""),registryEntries[registryIndex].element.appendChild(children[childrenIndex]),this.filledUpAreaRegistry.push(registryEntries[registryIndex].element),addedChildrenCount++;this._addMetadataAsDataSet(registryEntries[registryIndex].element,area.metadata),this._dispatchDOMUpdate(registryEntries[registryIndex].element)}}}},{key:"_dispatchDOMUpdate",value:function _dispatchDOMUpdate(el){if((0,_a_utils.isTrue)(this.configuration.triggerDOMUpdateEvent)){var event=new CustomEvent("DOMUpdate");event.matchingTarget=el,document.dispatchEvent(event)}}},{key:"_addMetadataAsDataSet",value:function _addMetadataAsDataSet(DOMEl,metadata){if(DOMEl&&metadata)for(var key in metadata)DOMEl.setAttribute("data-"+key,metadata[key])}},{key:"_handleServerConnectionClose",value:function _handleServerConnectionClose(e){e.matchingTarget.close()}}]),MerchandisingClient}();exports.default=MerchandisingClient;}),,,,,,,,(function(module,exports,__webpack_require__){"use strict";var _layzr=__webpack_require__(51),_layzr2=_interopRequireDefault(_layzr),_a_events=__webpack_require__(3),_header=__webpack_require__(35),_header2=_interopRequireDefault(_header),_search=__webpack_require__(36),_account=__webpack_require__(34),_tracking=__webpack_require__(39),_ShoppingList=__webpack_require__(32),_Cart=__webpack_require__(19),_polyfills=__webpack_require__(31),_polyfills2=_interopRequireDefault(_polyfills),_utils=__webpack_require__(14),_RideSingleSignOn=__webpack_require__(25);__webpack_require__(52);var _homepage=__webpack_require__(38),_homepage2=_interopRequireDefault(_homepage),_modal=__webpack_require__(12),_a_consentcookie=__webpack_require__(53),_a_consentcookie2=_interopRequireDefault(_a_consentcookie),_a_utils=__webpack_require__(1),_a_notifier=__webpack_require__(13),_a_notifier2=_interopRequireDefault(_a_notifier),_Merchandising=__webpack_require__(41),_Merchandising2=_interopRequireDefault(_Merchandising);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_a_events.addEvent)(document,"DOMContentLoaded",function(){new _polyfills2.default,new _homepage2.default,new _a_consentcookie2.default,new _a_notifier2.default({defaultDuration:5e3,max:3,showProgress:!1,storageId:_a_utils.Storage.TYPES.LOCAL,storageKey:"ADRN",closing:{enabled:!0,icon:"icon-circleClose"},icons:{default:"",error:"icon-circleClose",success:"icon-circleCheck",info:"icon-circleInfo"}}),new _Merchandising2.default,(0,_search.searchInit)(),(0,_account.accountInit)(),(0,_tracking.trackingInit)(),_RideSingleSignOn.RideSingleSignOn.init(),(0,_modal.modalInit)(),_ShoppingList.ShoppingList.init();var instance=(0,_layzr2.default)({normal:"data-lazy"});instance.update().check().handlers(!0),new _header2.default,_Cart.Cart.init(),(0,_a_events.addEvent)(document,"click",function(){return(0,_utils.storeCurrentUrl)("adrNavReferer","/nos-rayons")},".header__navigation"),(0,_a_events.addEvent)(document,"click",function(){return(0,_utils.storeCurrentUrl)("adrFavListsReferer","/client/mesproduits")},".header__favorites"),(0,_a_events.addEvent)(document,"click",function(){return document.body.scrollTop=document.documentElement.scrollTop=0},".site-footer__button-backToTop")});}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,'__esModule',{value:!0});var _extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i],source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target},knot=function(){function on(name,handler){return events[name]=events[name]||[],events[name].push(handler),this}function off(name){var handler=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return handler?events[name].splice(events[name].indexOf(handler),1):delete events[name],this}var extended=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},events=Object.create(null);return _extends({},extended,{on:on,once:function(name,handler){return handler._once=!0,on(name,handler),this},off:off,emit:function(name){for(var _this=this,_len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var cache=events[name]&&events[name].slice();return cache&&cache.forEach(function(handler){handler._once&&off(name,handler),handler.apply(_this,args)}),this}})},layzr=function(){function getLoc(){return window.scrollY||window.pageYOffset}function requestScroll(){prevLoc=getLoc(),requestFrame()}function requestFrame(){ticking||(window.requestAnimationFrame(function(){return check()}),ticking=!0)}function getOffset(node){return node.getBoundingClientRect().top+prevLoc}function inViewport(node){var viewTop=prevLoc,viewBot=viewTop+windowHeight,nodeTop=getOffset(node),nodeBot=nodeTop+node.offsetHeight,offset=settings.threshold/100*windowHeight;return nodeBot>=viewTop-offset&&nodeTop<=viewBot+offset}function setSource(node){if(instance.emit('src:before',node),srcset&&node.hasAttribute(settings.srcset))node.setAttribute('srcset',node.getAttribute(settings.srcset));else{var retina=1<dpr&&node.getAttribute(settings.retina);node.setAttribute('src',retina||node.getAttribute(settings.normal))}instance.emit('src:after',node),[settings.normal,settings.retina,settings.srcset].forEach(function(attr){return node.removeAttribute(attr)}),update()}function check(){return windowHeight=window.innerHeight,nodes.forEach(function(node){return inViewport(node)&&setSource(node)}),ticking=!1,this}function update(){return nodes=Array.prototype.slice.call(document.querySelectorAll('['+settings.normal+']')),this}var options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},prevLoc=getLoc(),ticking=void 0,nodes=void 0,windowHeight=void 0,settings={normal:options.normal||'data-normal',retina:options.retina||'data-retina',srcset:options.srcset||'data-srcset',threshold:options.threshold||0},srcset=document.body.classList.contains('srcset')||'srcset'in document.createElement('img'),dpr=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,instance=knot({handlers:function(flag){var action=flag?'addEventListener':'removeEventListener';return['scroll','resize'].forEach(function(event){return window[action](event,requestScroll)}),this},check:check,update:update});return instance};exports.default=layzr;}),(function(module,exports){}),(function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_utils=__webpack_require__(1),_a_events=__webpack_require__(3),_a_events2=_interopRequireDefault(_a_events),_a_hashmanager=__webpack_require__(54);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var ConsentCookie=function(){function ConsentCookie(){var _this=this;if(_classCallCheck(this,ConsentCookie),!ConsentCookie.instance){if(this.cookies={},this.cookies.hamonCookie="auchan.hamon",this.cookies.consentCookie="auchan.consentCookie",this.tmpCookieName="tmpHamonCookie",this.HASH_PREFIX="revalidate=",this.expiresDays=33696000,this.oneDay=86400,_a_hashmanager.HashManager.addHandler(this.HASH_PREFIX,function(action,isAdding){return _this._handleHashChange(action,isAdding)}),null==(0,_a_utils.getCookie)(this.cookies.consentCookie)){if(null!=(0,_a_utils.getCookie)(this.tmpCookieName))(0,_a_utils.addCookie)(this.cookies.hamonCookie,1,{maxAge:this.expiresDays}),(0,_a_utils.addCookie)(this.cookies.consentCookie,3,{maxAge:this.expiresDays}),(0,_a_utils.removeCookie)(this.tmpCookieName);else{var cookieBannerEl=(0,_a_utils.qs)(".consent-cookie");null!=cookieBannerEl&&cookieBannerEl.classList.add("open"),(0,_a_utils.addCookie)(this.tmpCookieName,"tmp",{maxAge:this.oneDay})}_a_events2.default.addEvent(document,"click",function(){return _this._handleCloseCookieBannerClick()},".consent-cookie__close")}ConsentCookie.instance=this}return ConsentCookie.instance}return _createClass(ConsentCookie,[{key:"_handleCloseCookieBannerClick",value:function _handleCloseCookieBannerClick(){var cookieBannerEl=(0,_a_utils.qs)(".consent-cookie");null!=cookieBannerEl&&cookieBannerEl.classList.remove("open")}},{key:"_handleHashChange",value:function _handleHashChange(action,isAdding){null!=isAdding&&((0,_a_utils.removeCookie)(this.cookies.hamonCookie),(0,_a_utils.removeCookie)(this.cookies.consentCookie),(0,_a_utils.removeCookie)(this.tmpCookieName))}}]),ConsentCookie}();exports.default=ConsentCookie;}),(function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_a_events=__webpack_require__(3),_a_events2=_interopRequireDefault(_a_events),_a_utils=__webpack_require__(1),_a_utils2=_interopRequireDefault(_a_utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var HashManager=function(){function HashManager(){var _this=this;return _classCallCheck(this,HashManager),HashManager.instance||(this.SEPARATOR="&",this.COMPARATOR="=",this.HASH_URI_SEPARATOR="#",this.HASH_REGEX=/.*#(.*)$/,this.handlers=[],this.awaitingActions=[],this.handledActions=[],this.defaultSettings={onAddOnly:!1},this._handleInitialHash(),_a_events2.default.addEvent(window,"hashchange",function(e){return _this._handleHashChange(e)}),HashManager.instance=this),HashManager.instance}return _createClass(HashManager,[{key:"addHashToURL",value:function addHashToURL(url,value,removeExistingHash){if(null!==url){var hashValue=this._buildHash(value);if(null!==hashValue){var hashIndex=url.indexOf(this.HASH_URI_SEPARATOR);return-1!=hashIndex&&_a_utils2.default.isTrue(removeExistingHash)&&(url=url.substr(0,hashIndex)),url+(-1==hashIndex||_a_utils2.default.isTrue(removeExistingHash)?this.HASH_URI_SEPARATOR:this.SEPARATOR)+hashValue}}}},{key:"addHash",value:function addHash(value){var hashValue=this._buildHash(value);null!==hashValue&&(window.location.hash=hashValue)}},{key:"_buildHash",value:function _buildHash(value){return null===value?null:Array.isArray(value)?value.join(this.SEPARATOR):value}},{key:"removeHash",value:function removeHash(hashToRemove,hashContainsPrefix){var _this2=this,hash=location.hash.slice(1);if(""!==hash&&""!==hashToRemove){var finalHash="",hashList=hash.split(this.SEPARATOR);hashList.forEach(function(value){var hashValue;hashValue=hashContainsPrefix?value:value.split(_this2.COMPARATOR)[1],null!==hashValue&&hashValue!==hashToRemove&&(finalHash+=""==finalHash?value:_this2.SEPARATOR+value)}),window.location.hash=finalHash}}},{key:"removeAllHash",value:function removeAllHash(){"pushState"in history?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash=""}},{key:"_addActionsToWaitingList",value:function _addActionsToWaitingList(newActions,previousActions){if(null!==newActions&&0<newActions.length)for(var previousActionsIndex,i=0;i<newActions.length;i++)previousActionsIndex=previousActions.indexOf(newActions[i]),-1==previousActionsIndex&&-1==this.awaitingActions.indexOf(newActions[i])?this.awaitingActions.push(newActions[i]):-1!=previousActionsIndex&&previousActions.splice(previousActionsIndex,1)}},{key:"_cleanupHandledActions",value:function _cleanupHandledActions(previousActions){if(null!==previousActions&&0<previousActions.length)for(var handledActionsIndex,i=0;i<previousActions.length;i++)if(handledActionsIndex=this.handledActions.indexOf(previousActions[i]),-1!=handledActionsIndex){this.handledActions.splice(handledActionsIndex,1);var handler=this._getHandlerForAction(previousActions[i]);null!==handler&&handler.callback.call(null,previousActions[i],!1)}}},{key:"_getHandlerForAction",value:function _getHandlerForAction(action){if(null!==action){var matchingHandlers=this.handlers.filter(function(handler){return action.startsWith(handler.prefix)});if(0<matchingHandlers.length)return matchingHandlers[0]}return null}},{key:"_triggerHandlers",value:function _triggerHandlers(){var _this3=this;if(0<this.awaitingActions.length){var inProgressActions=[];this.awaitingActions.forEach(function(action){var handler=_this3._getHandlerForAction(action);null!==handler&&(inProgressActions.push(action),handler.callback.call(null,action.replace(handler.prefix,""),!0))}),inProgressActions.forEach(function(action){var index=_this3.awaitingActions.indexOf(action);-1!=index&&_this3.awaitingActions.splice(_this3.awaitingActions.indexOf(action),1),_this3.handledActions.push(action)})}}},{key:"_handleHashChange",value:function _handleHashChange(e){var oldMatch=e.oldURL.match(this.HASH_REGEX),newMatch=e.newURL.match(this.HASH_REGEX),previousActions=[],newActions=[];oldMatch&&(previousActions=oldMatch[1].split(this.SEPARATOR)),newMatch&&(newActions=newMatch[1].split(this.SEPARATOR)),this._addActionsToWaitingList(newActions,previousActions),this._cleanupHandledActions(previousActions),this._triggerHandlers()}},{key:"addHandler",value:function addHandler(prefix,callback,settings){if(null!==prefix&&"function"==typeof callback){var customSettings=_a_utils2.default.extend(this.defaultSettings,settings);this.handlers.push({prefix:prefix,callback:callback}),this._triggerHandlers(),_a_utils2.default.isTrue(customSettings.onAddOnly)&&this.removeHandler(prefix)}}},{key:"removeHandler",value:function removeHandler(prefix){if(null!==prefix){var handlerList=this.handlers.filter(function(item){return item.prefix===prefix});0<handlerList.length&&handlerList.forEach(function(handler){this.handlers=this.handlers.slice(this.handlers.indexOf(handler),1)})}}},{key:"_handleInitialHash",value:function _handleInitialHash(){var currentHash=window.location.hash;if(0<currentHash.length){var e=new CustomEvent("hashchange"),href=window.location.href;e.oldURL=href.substring(0,href.length-currentHash.length),e.newURL=href,this._handleHashChange(e)}}}]),HashManager}(),instance=new HashManager;Object.freeze(instance),module.exports={HashManager:instance};})]);