(function(n){this.jsWCRS697_ListeProduitsStandard=function(t,i,r,u,f,e,o,s,h,c,l,a){var lt,nt,tt,it,rt,p,ut,ht,b,at;!r&&isArray(objDatasource)&&Utl.Log.logError("140813114458 - Impossible de creer la liste des produits sans datasource sour forme d'array !");!i&&isArray(i)&&Utl.Log.logError("140813114513 - Impossible de faire le rendu des produits dans la liste des renderers!");f||Utl.Log.logError("140813114531 - L'objet de localisation de doit pas être null !");e||Utl.Log.logError("140813114540 - La provenance ne peut pas être null !");t||Utl.Log.logError("150120113013 - Le selecteurConteneur ne peut pas être null !");s||Utl.Log.logError("150922110345 - La source des stickers produits objDatasourcePicto ne peut pas être null !");var ft=s||[],vt=h||Interfaces.jsWCRS642_ItfEvenement.enuTypeContenu.iCONTENU_PRINCIPAL,v=new Infomil.Api.Trade.Outils,et=!1,k=n(document.getElementById(t)),w=r,ct=i,d=f,ot=e,y="xxx",st=u,g=k;n(g)[0]&&n(g)[0].nodeName=="UL"&&g.width()<=0&&(g=n(n(g).parents("div")[0]));lt=o?o:ListesProduits.StrategyColonnade.septColonnes;nt=new ListesProduits.LayoutColonnade(g.width(),lt);l&&r.splice(nt.getColonnade().nb*l-1);trade=new Utl.DataBase(st);rt=function(){et?tt.reloadDOM(it,window.TradeGeneriqueContext.objTradeBuilder[v.sIdTradeBusiness]):tt.reloadDOM(it);et&&(v.RedimensionnerTradeGenerique(v.sIdTradeBusiness)?(v.GererAffichageTrade(!0,v.sIdTradeBusiness),Managers.jsWCRS609_MgrEvenement.emettreEvenement(Interfaces.jsWCRS642_ItfEvenement.avecTypeEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iAJOUT_TRADE_GENERIQUE_OK).avecElement({sIdTradeBusiness:v.sIdTradeBusiness,sMessage:"Chargement du levier terminé."}))):(v.GererAffichageTrade(!1,v.sIdTradeBusiness),Managers.jsWCRS609_MgrEvenement.emettreEvenement(Interfaces.jsWCRS642_ItfEvenement.avecTypeEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iAJOUT_TRADE_GENERIQUE_ERREUR).avecElement({sIdTradeBusiness:v.sIdTradeBusiness,sMessage:"Erreur de positionnement du trade (DOM incomplet)"}))))};a||setTradeGeneriqueContext(w,nt,st,ot,ft);p=new ListesProduits_Renderer.RendererListeProduitBuilder(ct);p.avecZonePicto(new ZonePicto(ft,lstTemplates,c));ut=new ListesProduits_Fonctionnalite.composerFonctionnalites;ut.init.dataSource(w).init.dataSourcePicto(ft).init.ajax(window.lstConfAjax).init.localisation(d).init.provenanceArticle(ot).init.templates(ct);ht=new ListesProduits_Trade.jsWCRS696_MapperOperationsTrade(st,ot,nt);b=[];b.push(new ListesProduits.OnResizeWindow(k,rt,nt));b.push(new ListesProduits.OnProduitSupprime(rt));this.fonctionalitesProduits=function(){return ut};this.rendererProduitBuilder=function(){return p};this.layoutTradeBuilder=function(){return ht};this.renderLayout=function(){tt=new ListesProduits_Renderer.jsWCRS675_RendererLayout(y,w,k,ut,vt,nt,ht);var n=function(n,t){n||Utl.Log.logError("150116100233 - le renderer de liste produit pleine est indéfini!");var i=n,r=t;this.normal=function(){return tt.initLayout(i),tt};this.lazy=function(){return r||Utl.Log.logError("150116100233 - le renderer de liste produit lazy est indéfini!"),lazyLoadedLayout=new ListesProduits_Renderer.jsWCRS674_RendererElementLazyLoading(k,tt,w,Interfaces.jsWCRS642_ItfEvenement.enuTypeContenu.iCONTENU_PRINCIPAL,i),lazyLoadedLayout.initLayout(r),lazyLoadedLayout}},t=function(){this.listeDeProduit=function(){var t=it=p.buildListeProduitStandard(),r=new ListesProduits_ContenuElements.jsWCRS648_Vignette(y,i.templateVignetteVide,d);return new n(t,r)};this.listeDeProduitAvecRayon=function(){var u,t,r;return it=w.length==1?p.buildListeRayonUnique():p.buildListeRayonsStandard(),u=w.length==1?p.buildListeRayonUniqueLazyLoader():p.buildListeRayonsStandardLazyLoader(),t=null,w.length==1?(r=new ListesProduits_ContenuElements.jsWCRS648_Vignette(y,i.templateVignetteVide,d),t=new ListesProduits_ContenuElements.jsWCRS706_RayonUnique(y,i.templateRayonVide,r)):(r=new ListesProduits_ContenuElements.jsWCRS648_Vignette(y,i.templateVignetteVide,d),t=new ListesProduits_ContenuElements.jsWCRS680_RayonStandard(y,i.templateRayonVide,r)),new n(u,t)};this.listeDeProduitAvecRayonPredicat=function(t){var f,r,u;return it=p.buildListeRayonsPredicatStandard(t),f=p.buildListeRayonsPredicatStandardLazyLoader(t),r=null,w.length==1?(u=new ListesProduits_ContenuElements.jsWCRS648_Vignette(y,i.templateVignetteVide,d),r=new ListesProduits_ContenuElements.jsWCRS706_RayonUnique(y,i.templateRayonVide,u)):(u=new ListesProduits_ContenuElements.jsWCRS648_Vignette(y,i.templateVignetteVide,d),r=new ListesProduits_ContenuElements.jsWCRS680_RayonStandard(y,i.templateRayonVide,u)),new n(f,r)}};return new t};this.appliquerFonctionnalite=function(){for(var n=0;n<b.length;n++)b[n].appliquerFonctionnalite(k)};this.disposerFonctionnalite=function(){for(var n=0;n<b.length;n++)b[n].disposerFonctionnalite(k)};at=function(n){var t,i;n.eTypeEvenement==Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iAJOUT_TRADE_GENERIQUE&&(t=n.objElement.sIdTradeBusiness,v.sIdTradeBusiness=t,window.TradeGeneriqueContext.objRetourAjax&&window.TradeGeneriqueContext.objRetourAjax[t]?(window.TradeGeneriqueContext.objTradeBuilder=window.TradeGeneriqueContext.objTradeBuilder||{},window.TradeGeneriqueContext.objTradeBuilder[t]=v.CreerTradeGeneriqueBuilder(window.TradeGeneriqueContext.objRetourAjax[t],t),window.TradeGeneriqueContext.objTradeBuilder[t]?(i=v.PositionnerTrade(window.TradeGeneriqueContext.objTradeBuilder[t],t),i.done(function(n){et=!0;window.TradeGeneriqueContext.objTradeBuilder=window.TradeGeneriqueContext.objTradeBuilder||{};window.TradeGeneriqueContext.objTradeBuilder[t]=n;rt()}),i.fail(function(){rt();v.GererAffichageTrade(!1,t);Managers.jsWCRS609_MgrEvenement.emettreEvenement(Interfaces.jsWCRS642_ItfEvenement.avecTypeEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iAJOUT_TRADE_GENERIQUE_ERREUR).avecElement({sIdTradeBusiness:t,sMessage:"Erreur de dimensionnement du trade"}))})):Managers.jsWCRS609_MgrEvenement.emettreEvenement(Interfaces.jsWCRS642_ItfEvenement.avecTypeEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iAJOUT_TRADE_GENERIQUE_ERREUR).avecElement({sIdTradeBusiness:t,sMessage:"Erreur de création du Builder Trade Génériques"}))):Managers.jsWCRS609_MgrEvenement.emettreEvenement(Interfaces.jsWCRS642_ItfEvenement.avecTypeEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iAJOUT_TRADE_GENERIQUE_ERREUR).avecElement({sIdTradeBusiness:t,sMessage:n.objElement.Message})))};Managers.jsWCRS609_MgrEvenement.abonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iAJOUT_TRADE_GENERIQUE,at)}}).call(this.ListesProduits=this.ListesProduits||{__namespace:!0},window.jQuery);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();