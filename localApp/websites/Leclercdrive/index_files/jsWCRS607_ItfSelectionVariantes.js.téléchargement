(function(n){this.jsWCRS607_ItfSelectionVariantes=Utilitaires.Class.extend({iIdGroupeVariante:null,sNoPointLivraison:null,sIdUnique:null,iIdRayon:null,init:function(n){n&&(this.iIdGroupeVariante=n.iIdProduit,this.sNoPointLivraison=n.sNoPointLivraison,this.sIdUnique=n.sIdUnique,this.iIdRayon=n.iIdRayon);Managers.jsWCRS609_MgrEvenement.abonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iOUVRIR_SELECTION_VARIANTES,this.genererPopinSelectionVariante,this)},genererPopinSelectionVariante:function(t){if(!t||!t.objElement||t.objElement.sIdUnique==this.sIdUnique){var i=this.sIdUnique,r=this.iIdGroupeVariante,s=this.iIdRayon,u=function(t,i,r,u,f){var h="xxx",o=r,w=Utilitaires.Ressources.vbNETsWCRS201.ascWCRS310_Produits,b=i,k=t,c=f,l="ulListeVariantes_"+u,a="divWCRS310_ProductsList_"+u,s="",e,v,y,p;return s+="<div id='"+a+"' class='divWCRS310_ProductsList divWCRS060_VariantesList'>",s+="<ul class='clearfix ulWCRS310_VariantesList' id='"+l+"'/>",s+="<\/div>",n("#"+a).remove(),n(document.body).append(s),e=new ListesProduits.jsWCRS697_ListeProduitsStandard(l,o,k,[],w,b,ListesProduits.StrategyColonnade.huitColonnes,c,Interfaces.jsWCRS642_ItfEvenement.enuTypeContenu.iCONTENU_PRINCIPAL,null,null,!0),e.fonctionalitesProduits().avecToolTipVignette().avecToolTipStickersVignetteProduit().avecBarreOutils().avecPopinFicheProduit().avecPlusUnMoinsUn().avecAComposer().avecAjoutListe(".liWCRS310_Product").avecSuggererProduit(".liWCRS310_Product").avecUpselling().avecRecette().avecQuantiteMaximaleAtteinteProduit().avecQuantiteMinimaleAtteinteProduit().avecStickersVignetteProduit().avecLimiteLiquideDepassee(),v=ListesProduits_HtmlRenderers.creerBarreOutils(h,o)(["VoirRayon","AjouterAListe"]),y=ListesProduits_HtmlRenderers.creerBarreOutils(h,o)(["VoirRayon","AjouterAListe"]),e.rendererProduitBuilder().avecBarreOutil(v,y),p=new ZonePicto(c,o,"10700"),e.rendererProduitBuilder().avecZonePicto(p),e.renderLayout().listeDeProduit().normal(),e.appliquerFonctionnalite(),!0},f=function(n){return new Utl.jsWCRS610_ProvenanceArticle({eOrigine:Utl.jsWCRS610_ProvenanceArticle.enuOrigine.iSITE_COURSES,eTypePage:Utl.jsWCRS610_ProvenanceArticle.enuProvenancePageType.iSELECTION_VARIANTE,niIdElement:n,sTexteRecherche:"",eVue:Utl.jsWCRS610_ProvenanceArticle.enuVue.iSELECTION_VARIANTE,iRangAffichage:0,sInformationsComplementaires:null})},e=function(t){var i=n.Deferred(),u=window.lstConfAjax.RecupererVariantesGroupeAjax,r;return u?(r=u.url,r=r.replace("[ID_GROUPE]",t),Utilitaires.Ajax.appeler({context:null,config:{type:Utilitaires.Constantes.Ajax.Type.iURL,url:r,method:Utilitaires.Constantes.Ajax.Methode.iGET}}).done(function(n){n.iIdGroupeVariante=t;n.objContenu.lstElements.forEach(function(n){n.objElement.eIncitationLot=0});i.resolve(n)}).fail(function(n){n.iIdGroupeVariante=t;i.reject(n)})):i.reject(null),i.promise()},o=function(t){var i=n(".divWCRS060_VariantesList"),r=660;t<5&&(r=360);i&&WCTD201.Class.PopinManager.OuvrirPopin({sNomPopin:"OuvrirPopinChoixVariantes",fClient:!0,conteneurType:WCTD201.Class.PopinModele,popin:{iWidth:816,iMaxHeight:r,fFermerAvecCroix:!0,fFermerAvecEchap:!0,fFermerAvecFade:!0},conteneur:{fTitreSeparateur:!0,titre:"Sélection du modèle",contenu:i}})};return Utl.Loader.afficher(),e(r).done(function(n){Utl.Templates.avecListeVignettesStandard().load().done(function(t){!t&&isArray(t)&&Utl.Log.logError("140813034459 - La liste des lstTemplates doit être un tableau !");var e=f(n.iIdGroupeVariante),r=0;n&&(u(n.objContenu.lstElements,e,t,i,n.objStickers),r=n.objContenu.lstElements.length);o(r)}).fail(function(n){Utl.Log.logError("Erreur sur le chargement des lstTemplates "+n)})}).fail(function(n){Utl.Log.logError("Erreur sur le chargement des variantes "+n)}),Utl.Loader.masquer(),!1}}})}).call(this.Interfaces=this.Interfaces||{__namespace:!0},window.jQuery);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();