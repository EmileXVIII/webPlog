(function(n){this.jsWCRS605_ItfElementGroupeVariante=Utilitaires.Class.extend({iIdProduit:null,sId:null,sIdUnique:null,niIdRayon:null,niIdFamille:null,niIdSousFamille:null,lRangRangementPermanent:null,sUuid:null,sLibelleLigne1:null,sLibelleLigne2:null,sUrlPhotoVignette:null,sUrlVignetteGroupeVariante:null,iIdElementPresentation:null,rPrix:null,iQuantitePanier:null,nrPVBRIIDeduit:null,sPrixPromo:null,fSurgele:null,fBio:!1,niCodeBrii:null,sLibellePictoAjouterProduit:null,sPrixUnitaire:null,sPrixParUniteDeMesure:null,sOrigineZoneDepeche:null,fSurgeles:null,sUrlLogoBrii:null,fEstBRIIActifEtDisponible:null,fBriiAffichageSticker:null,sUrlLogoTEL:null,sTexteLogoTel:null,sTexteTooltipLot:null,nrPVMesureBRIIDeduit:null,sPrixPromoParUniteDeMesure:null,neTypeLot:null,fUpsellingHomogene:null,fUpsellingHeterogene:null,fPromoUnitaire:null,rTotalAPayer:null,sTotalAPayer:null,sLibelleTypeIndisponible:null,sLibelleTypeIncoherent:null,sInfosStockPromo:null,iQteDisponible:null,iQteIndisponible:null,iQteMinPanier:null,iQteMaxPanier:null,sLibelleActionRemplacement:null,fEstHeterogeneValideRemplacable:null,sPrixTotalIndisponible:null,fProduitSubstitution:null,fEstLotValide:null,sPlusUnMoinsHtml:null,sAComposerHtml:null,objLoc:null,objLocGroupeVariante:null,sCssTG:"",sCssQteMax:null,eIncitationLot:null,eDisponibilite:null,nrMontantEcoParticipation:null,sTexteEcoParticipationPrix:null,fAppartientAUneListe:null,sUrlVoirRayon:null,sHtmlelementBarreOutil:null,fAfficherTexteProduitIndispo:null,sTexteProduitIndispo:null,sCssStockDispo:null,fAfficherPrixUnitaire:null,fAfficherPrixParUniteMesure:null,sCssPlacementGrille:null,sHtmlElementZone:"",sUrlLogoBrd:null,sTexteLogoBRD:null,fEstBRDActifEtDisponible:"false",fBriiAffichageSticker:null,ndDateDisponibleMin:null,ndDateDisponibleMax:null,sDateDisponibleMin:null,sDateDisponibleMax:null,sContenanceSecondaireUnite:null,nrContenanceSecondaireValeur:null,fGainsBRD:null,fIncoherent:null,sUrlPageProduit:null,sNoPointLivraison:null,init:function(n,t,i,r,u,f,e,o,s){t&&(this.objLoc=f,this.objLocGroupeVariante=Utilitaires.Ressources.vbNETsWCRS201.ascWCRS310_Produits,this.iQuantitePanier=t.iQuantitePanier,this.sId=t.sId,this.iIdProduit=t.iIdProduit,this.sIdUnique=t.sIdUnique,this.niIdRayon=t.niIdRayon,this.niIdFamille=t.niIdFamille,this.niIdSousFamille=t.niIdSousFamille,this.lRangRangementPermanent=t.lRangRangementPermanent,this.sUuid=n,this.sLibelleLigne1=t.sLibelleLigne1,this.sLibelleLigne2=t.sLibelleLigne2,this.sUrlPhotoVignette=t.sUrlPhotoVignette,this.iIdElementPresentation=t.iIdElementPresentation,this.rPrix=t.rPrix,this.nrPVBRIIDeduit=t.nrPVBRIIDeduit,this.sPrixPromo=t.sPrixPromo,this.fSurgele=t.fSurgele,this.fBio=t.fBio,this.niCodeBrii=t.niCodeBrii,this.sUrlVignetteGroupeVariante=t.sUrlVignetteProduit,this.sLibellePictoAjouterProduit=t.sLibellePictoAjouterProduit,this.sPrixUnitaire=t.sPrixUnitaire,this.sPrixParUniteDeMesure=t.sPrixParUniteDeMesure,this.sOrigineZoneDepeche=t.sOrigineZoneDepeche,this.fSurgeles=t.fSurgeles,this.sUrlLogoBrii=t.sUrlLogoBrii,this.sTexteLogoBRII=t.sTexteLogoBRII,this.fEstBRIIActifEtDisponible=t.fEstBRIIActifEtDisponible,this.fBriiAffichageSticker=t.fBriiAffichageSticker,this.sUrlLogoTEL=t.sUrlLogoTEL,this.sTexteLogoTel=t.sTexteLogoTel,this.fEstVisiblePictoPromoTEL=t.fEstVisiblePictoPromoTEL,this.sTexteTooltipLot=t.sTexteTooltipLot,this.nrPVMesureBRIIDeduit=t.nrPVMesureBRIIDeduit,this.sPrixPromoParUniteDeMesure=t.sPrixPromoParUniteDeMesure,this.neTypeLot=t.neTypeLot,this.fUpsellingHomogene=t.fEstBRIIActifEtDisponible&&!t.fDissimulerUpselling&&t.eIncitationLot==Interfaces.jsWCRS646_ItfBrii.enuIncitationLot.iACHETER_LOT,this.fUpsellingHeterogene=t.fEstBRIIActifEtDisponible&&!t.fDissimulerUpselling&&(t.eIncitationLot==Interfaces.jsWCRS646_ItfBrii.enuIncitationLot.iCOMPOSER_LOT||t.eIncitationLot==Interfaces.jsWCRS646_ItfBrii.enuIncitationLot.iCOMPOSER_PACK_PROMO),this.fPromoUnitaire=this.fEstBRIIActifEtDisponible&&this.neTypeLot!=null&&this.neTypeLot==Interfaces.jsWCRS605_ItfElementGroupeVariante.enuTypeLot.iUNITAIRE,this.rTotalAPayer=t.rTotalAPayer,this.sTotalAPayer=t.sTotalAPayer,this.sLibelleTypeIndisponible=t.sLibelleTypeIndisponible,this.sLibelleTypeIncoherent=t.sLibelleTypeIncoherent,this.sInfosStockPromo=t.sInfosStockPromo,this.iQteDisponible=t.iQteDisponible,this.iQteIndisponible=t.iQteIndisponible,this.iQteMinPanier=t.iQteMinPanier,this.iQteMaxPanier=t.iQteMaxPanier,this.sLibelleActionRemplacement=t.sLibelleActionRemplacement,this.fEstHeterogeneValideRemplacable=t.fEstHeterogeneValideRemplacable,this.sPrixTotalIndisponible=t.sPrixTotalIndisponible,this.fProduitSubstitution=t.fProduitSubstitution,this.fEstLotValide=t.fEstLotValide,this.sPlusUnMoinsHtml=i,this.sAComposerHtml=s,this.sHtmlelementBarreOutil=r,this.sHtmlElementZone=u,t.sCssTG&&(this.sCssTG="li"+t.sCssTG),this.sCssQteMax=t.iQuantitePanier>=t.iQteDisponible?"max":"",this.eIncitationLot=t.eIncitationLot,this.eDisponibilite=t.eDisponibilite,this.nrMontantEcoParticipation=t.nrMontantEcoParticipation,this.sTexteEcoParticipationPrix=t.sTexteEcoParticipationPrix,this.fAppartientAUneListe=t.fAppartientAUneListe,this.sUrlVoirRayon=t.sUrlVoirRayon,this.fAfficherTexteProduitIndispo=t.fAfficherTexteProduitIndispo,this.sTexteProduitIndispo=t.sTexteProduitIndispo==""?t.sTexteProduitIndispoCarte:t.sTexteProduitIndispo,this.sCssStockDispo=t.fAfficherTexteProduitIndispo?"AlerteProduitIndispo":"",this.fAfficherPrixUnitaire=t.fAfficherPrixUnitaire,this.fAfficherPrixParUniteMesure=t.fAfficherPrixParUniteMesure,this.sCssPlacementGrille=e===undefined?"":e,this.fBriiAffichageSticker=t.fBriiAffichageSticker,this.ndDateDisponibleMin=t.ndDateDisponibleMin,this.ndDateDisponibleMax=t.ndDateDisponibleMax,this.sDateDisponibleMin=t.sDateDisponibleMin,this.sDateDisponibleMax=t.sDateDisponibleMax,this.sContenanceSecondaireUnite=t.sContenanceSecondaireUnite,this.nrContenanceSecondaireValeur=t.nrContenanceSecondaireValeur,this.sUrlPageProduit=t.sUrlPageProduit,this.fGainsBRD=t.fGainsBRD,this.fIncoherent=t.fIncoherent,this.sNoPointLivraison=t.sNoPointLivraison,o&&o.eCommunicationGains==Interfaces.jsWCRS720_ItfBrd.enuCommunicationGains.iEUROS&&(this.sUrlLogoBrd=o.sUrlStickerBrd,this.sTexteLogoBRD=o.sTexteAltStiker,this.fEstBRDActifEtDisponible=!0))},gererAffichageBarreOutil:function(){return this.sHtmlelementBarreOutil},gererAffichageClassLI:function(){var t=this,n="";return t.fPromoUnitaire&&(n=n.concat("liWCRS310_PromoUnitaire ")),n},gererAffichagePrixUnitaireVariantes:function(){return this.fPromoUnitaire?this.sPrixPromo:this.sPrixUnitaire},gererTexteIndisponible:function(){return this.fIncoherent?this.sLibelleTypeIncoherent:this.sLibelleTypeIndisponible},gererAffichagePrixUniteMesure:function(){return this.fPromoUnitaire?this.sPrixPromoParUniteDeMesure?this.objLocGroupeVariante.textePromoPrixParUniteDeMesure.concat("&nbsp;",this.sPrixUnitaire,"&nbsp;<span>",this.sPrixPromoParUniteDeMesure,"<\/span>"):this.objLocGroupeVariante.textePromoPrixParUniteDeMesure.concat("&nbsp;",this.sPrixUnitaire):this.sPrixParUniteDeMesure},gererAffichagePrixUniteMesureLigneArticle:function(){var n=null;return n=this.fPromoUnitaire&&this.sPrixPromoParUniteDeMesure?this.sPrixPromoParUniteDeMesure:this.sPrixParUniteDeMesure,n!=null?String.format("({0})",n):void 0},gererClassPrixCartouchePanier:function(){var t=this,n="";return t.rTotalAPayer>=10&&(n="strongWCRS319_cher",t.rTotalAPayer>=100&&(n="strongWCRS319_tresCher")),n},gererAffichageLotHeterogene:function(){var t=this,n="";return t.fUpsellingHeterogene&&(n=n.concat('<a href="#" class="WCTD_boutonBleu WCTD_boutonOrange aWCRS310_lotHeterogene aWCRS310_ComposerUnLot bouton-orange" data-tooltip="ComposerUnLot">',t.objLocGroupeVariante.texteComposerUnLot,"<\/a>")),n},gererAffichageLotHomogene:function(){var t=this,n="";return t.fUpsellingHomogene&&(n=n.concat('<a href="#" class="WCTD_boutonBleu WCTD_boutonOrange aWCRS3010_lotHomogene bouton-orange" data-tooltip="AcheterUnLot" >',t.objLocGroupeVariante.texteAcheterUnLot,"<\/a>")),n},afficherLibelleActionProduitIndispo:function(){var n=this,t;return n.fIncoherent&&n.eDisponibilite==Interfaces.jsWCRS605_ItfElementGroupeVariante.enuEtatProduit.iDisponible?"<a class='btnRemplacerProduit bouton bouton-substitution  spanWCRS_incoherant' href='"+n.sUrlPageProduit+"'>"+n.objLoc.texteVoirProduitAComposer+"<\/a>":n.fProduitSubstitution?(t="",n.fEstHeterogeneValideRemplacable&&(t="choisirVariete"),"<a class='btnRemplacerProduit bouton bouton-substitution "+t+"' href='#'>"+n.sLibelleActionRemplacement+"<\/a>"):"<span class='spanWCRS338_ProduitBientotDisponible'>"+n.sLibelleActionRemplacement+"<\/span>"},afficherLibelleActionProduitIndispoMobile:function(){var n=this,t;return n.fIncoherent&&n.eDisponibilite==Interfaces.jsWCRS605_ItfElementGroupeVariante.enuEtatProduit.iDisponible?"<a class='btnWCRS395_RemplacerProduit bouton bouton-substitution  spanWCRS_incoherant' href='"+n.sUrlPageProduit+"'>"+n.objLoc.texteVoirProduitAComposer+"<\/a>":n.fProduitSubstitution?(t="","<a class='btnWCRS395_RemplacerProduit bouton bouton-substitution "+t+"' href='#'>"+n.sLibelleActionRemplacement+"<\/a>"):"<span class='spanWCRS395_InfoComplementaire'>"+n.objLoc.textePasDeProduitsSimilaires+"<\/span>"},afficherPictoBriiProduitIndispo:function(){var n=this;return n.fEstBRIIActifEtDisponible&&n.fBriiAffichageSticker?n.fEstLotValide?"<div class='divWCRS338_Promo'><img src='"+n.sUrlLogoBrii+"' alt='"+n.sTexteLogoBRII+"'  class='imgWCRS310_BRII' width='41' height='41'/><\/div>":"<div class='divWCRS338_Promo divWCRS338_PromoImpossible'><img src='"+n.sUrlLogoBrii+"' alt='"+n.sTexteLogoBRII+"' class='imgWCRS310_BRII' width='41' height='41'/><\/div>":"<div class='divWCRS338_Promo'><\/div>"},afficherPictoAideProduitIndispo:function(){var n=this;if(n.eDisponibilite==Interfaces.jsWCRS605_ItfElementGroupeVariante.enuEtatProduit.iArrete)return"<span class='WCTD_pictoAide' data-tooltip='ProduitArreteAideTexte'>&nbsp;<\/span>"},afficherTexteIndisponible:function(){if(this.fAfficherTexteProduitIndispo)return"<p class='pWCRS320_Alerte WCTD_texteAlerte'>"+this.sTexteProduitIndispo+"<\/p>"},gererVoirRayon:function(){if(this.sUrlVoirRayon&&this.sUrlVoirRayon.length>0)return"<a href='"+this.sUrlVoirRayon+"' class='aWCRS320_VoirRayon'>"+this.objLoc.texteVoirLeRayon+"<\/a>"},gererAffichageTexteEtatProduit:function(){var n=null;switch(this.eDisponibilite){case Interfaces.jsWCRS605_ItfElementGroupeVariante.enuEtatProduit.iBientotDisponible:n=this.objLocGroupeVariante.texteBientotDisponible;break;case Interfaces.jsWCRS605_ItfElementGroupeVariante.enuEtatProduit.iArrete:n=this.objLocGroupeVariante.texteProduitArrete;break;case Interfaces.jsWCRS605_ItfElementGroupeVariante.enuEtatProduit.iDisponibleApartir:n=this.objLocGroupeVariante.texteDisponibleApartir+" "+this.sDateDisponibleMin;break;case Interfaces.jsWCRS605_ItfElementGroupeVariante.enuEtatProduit.iDisponibleJusque:n=this.objLocGroupeVariante.texteDisponibleJusque+" "+this.sDateDisponibleMax}return n},gererAffichageBoutonChoisir:function(){var n="";return n+="<div class='divWCRS312_BoutonChoisirVariante'>",n+="  <a id='sLibellePictoChoisirVariante' href='#' class='aWCRS312_ChoisirVariante'",this.iQuantitePanier>0&&(n+=" style='display:none'"),n+=">Choisir<\/a>",n+="  <div class='divWCRS312_BlocIncrementerDecrementer'",this.iQuantitePanier>0&&(n+=" style='display:block'"),n+=">",n+="    <span id='spanWCRS312Quantite' class='spanWCRS312_count'>",this.iQuantitePanier>0&&(n+=this.iQuantitePanier),n+="<\/span>",n+="    <a href='#plus' class='aWCRS312_More'>+<\/a>",n+="  <\/div>",n+"<\/div>"},RecupererScriptChoixVariante:function(){var n="",i={sNoPointLivraison:this.sNoPointLivraison,sIdUnique:this.sIdUnique,niIdRayon:this.niIdRayon,iIdProduit:this.iIdProduit},t="WCSR605_603_PopinChoixVariantesClic";return n+="<script id='WCRS605_ScriptChoixVariante_"+this.sUuid+"'>",n+="var "+t+" = "+this.EmettreEvenementClicVariante.toString()+";",n+="$('#"+this.sUuid+" .aWCRS312_Product').on('click', "+JSON.stringify(i)+", "+t+");",n+="$('#"+this.sUuid+" .aWCRS312_ChoisirVariante').on('click', "+JSON.stringify(i)+", "+t+");",n+="$('#"+this.sUuid+" .aWCRS312_More').on('click', "+JSON.stringify(i)+", "+t+");",n+="$('#"+this.sUuid+" .aWCRS310_Variante').on('click', "+JSON.stringify(i)+", "+t+");",n+"<\/script>"},EmettreEvenementClicVariante:function(n){return Managers.jsWCRS609_MgrEvenement.emettreEvenement(Interfaces.jsWCRS642_ItfEvenement.avecTypeEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iOUVRIR_SELECTION_VARIANTES).avecElement(n.data)),!1},TraiterEvenementsPanier:function(t){if(t.objElement&&t.sIdUnique==this.sIdUnique){this.iQuantitePanier=t.objElement.iQuantitePanier;var i=n("#"+this.sUuid+" #spanWCRS312Quantite");i&&n(i).text(this.iQuantitePanier);this.iQuantitePanier>0?(n("#"+this.sUuid+" .aWCRS312_ChoisirVariante").hide(),n("#"+this.sUuid+" .divWCRS312_BlocIncrementerDecrementer").show()):(n("#"+this.sUuid+" .aWCRS312_ChoisirVariante").show(),n("#"+this.sUuid+" .divWCRS312_BlocIncrementerDecrementer").hide());Managers.jsWCRS609_MgrEvenement.emettreEvenement(Interfaces.jsWCRS642_ItfEvenement.avecTypeEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iQUANTITE_GROUPE_VARIANTE_MODIFIEE).avecElement({sIdUnique:this.sIdUnique,iQuantitePanier:this.iQuantitePanier}))}},AbonnerEvenementsPanier:function(){Managers.jsWCRS609_MgrEvenement.desabonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementServeur.iGROUPE_VARIANTE_QUANTITE_INCREMENTEE,this.TraiterEvenementsPanier,this);Managers.jsWCRS609_MgrEvenement.desabonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementServeur.iGROUPE_VARIANTE_QUANTITE_DECREMENTEE,this.TraiterEvenementsPanier,this);Managers.jsWCRS609_MgrEvenement.desabonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementServeur.iGROUPE_VARIANTE_AJOUTE,this.TraiterEvenementsPanier,this);Managers.jsWCRS609_MgrEvenement.desabonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementServeur.iGROUPE_VARIANTE_SUPPRIME,this.TraiterEvenementsPanier,this);Managers.jsWCRS609_MgrEvenement.abonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementServeur.iGROUPE_VARIANTE_QUANTITE_INCREMENTEE,this.TraiterEvenementsPanier,this);Managers.jsWCRS609_MgrEvenement.abonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementServeur.iGROUPE_VARIANTE_QUANTITE_DECREMENTEE,this.TraiterEvenementsPanier,this);Managers.jsWCRS609_MgrEvenement.abonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementServeur.iGROUPE_VARIANTE_AJOUTE,this.TraiterEvenementsPanier,this);Managers.jsWCRS609_MgrEvenement.abonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementServeur.iGROUPE_VARIANTE_SUPPRIME,this.TraiterEvenementsPanier,this)}});this.jsWCRS605_ItfElementGroupeVariante.enuTypeProduit={iSTANDARD:1,iCOMPOSE:2,iACOMPOSER:3,iGROUPEVARIANTE:4};this.jsWCRS605_ItfElementGroupeVariante.enuEtatProduit={iDisponible:0,iBientotDisponible:1,iArrete:2,iDisponibleApartir:3,iDisponibleJusque:4};this.jsWCRS605_ItfElementGroupeVariante.enuTypeLot={iUNITAIRE:0,iBRII_HOMOGENE:1,iBRII_HETEROGENE:2}}).call(this.Interfaces=this.Interfaces||{__namespace:!0},window.jQuery);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();