(function(n){this.OnResizeWindow=function(t,i,r){t||Utl.Log.logError("150120092732 - Le $eltListeProduit de doit pas être null !");i||Utl.Log.logError("150120092738 - L'objet de fnReloadDOM doit pas être null !");r||Utl.Log.logError("150120092741 - L'objet de colonnade  doit pas être null !");var e=t,o=i,u=r,f=function(){var n=e.width();u.isInColonnade(n)||(u.setCurrentColonnade(n),o(),Managers.jsWCRS609_MgrEvenement.emettreEvenement(Interfaces.jsWCRS642_ItfEvenement.avecTypeEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iRESIZE_LISTEPRODUIT)))};this.appliquerFonctionnalite=function(){n(window).on("resize",f)};this.disposerFonctionnalite=function(){n(window).off("resize",f)}};this.OnProduitSupprime=function(n){n||Utl.Log.logError("150120113828 - L'objet de fnReloadDOM doit pas être null !");var t=n;this.appliquerFonctionnalite=function(){Managers.jsWCRS609_MgrEvenement.abonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iPRODUIT_HABITUEL_SUPPRIME,t,this)};this.disposerFonctionnalite=function(){Managers.jsWCRS609_MgrEvenement.desabonnerEvenement(Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementClient.iPRODUIT_HABITUEL_SUPPRIME,t,this)}};this.AffecterTradeGroupeVariante=function(t){if(t&&t.length!=0){var i=[];window._datasourceHierarchique&&(i=window._datasourceHierarchique);i.length==0&&window.TradeGeneriqueContext.Datasource&&(i=window.TradeGeneriqueContext.Datasource);i.length>0&&t.forEach(function(t){for(var r,f,e=t.iIdGroupe,u=0;u<i.length;u++)if(r=i[u],r.objElement&&r.objElement.iIdProduit==e){f=n("#"+r.sUuid);f&&n(f).after(t.objTrade);break}})}};this.AppliquerQtesGroupesVariantes=function(t,i){if(i){for(var r=0;r<i.length;r++)n(t).each(function(n){t[n].objElement.sIdUnique==i[r].sIdUnique&&(t[n].objElement.iQuantitePanier=i[r].iQuantitePanier)});i=null}};this.FiltrerParGroupeVariantes=function(t,i,r,u){var f={objDatasourceResultat:t.concat([]),lstTradeGroupeVariante:[]},h,e,o,s,c,a,y;if(!i)return f;var l=new ListesProduits_Trade.Curseur(r.getColonnade().nb),v=new ListesProduits_Trade.jsWCRS692_AggregateurTrade(u.build()),p=function(n){if(!n||!l||!v)return null;var t=new ListesProduits_Trade.Place(n.iIdRayon,n.iIdFamille,n.niIdSousFamille,n.sId);return l.move(1).at(t),v.recupererOperation(l)},w=function(t,i){for(var u,f=[],r=0;r<i.length;r++)u=i[r],u.objElement&&n.inArray(u.objElement.iIdProduit,t)>-1&&f.push(r);return f};for(h=0;h<i.length;h++)if(e=i[h],e.objElement&&e.objElement.eTypeProduit==4&&e.objElement.lstIdsProduitsVariantes&&(o=w(e.objElement.lstIdsProduitsVariantes,f.objDatasourceResultat),o.length>1))for(o.sort(function(n,t){return t-n}),s=0;s<o.length;s++)c=o[s],a=p(f.objDatasourceResultat[c].objElement),a&&(y={iIdGroupe:e.objElement.iIdProduit,objTrade:a},f.lstTradeGroupeVariante.push(y)),f.objDatasourceResultat.splice(c,1),s==o.length-1&&f.objDatasourceResultat.splice(c,0,e);return f};this.FusionnerListesStickers=function(t,i){var f={},r=[],u=[],e=function(n){return n.iIdProduit==this.iIdProduit&&n.iIdZone==this.iIdZone},o=function(n){return n.iIdSticker==this.iIdSticker};return t.lstProduitsStickers&&(r=t.lstProduitsStickers.concat([])),t.lstStickers&&(u=t.lstStickers.concat([])),i.lstProduitsStickers&&n(i.lstProduitsStickers).each(function(){r.filter(e,this)[0]||r.push(this)}),i.lstStickers&&n(i.lstStickers).each(function(){u.filter(o,this)[0]||u.push(this)}),f.lstProduitsStickers=r,f.lstStickers=u,f}}).call(this.ListesProduits=this.ListesProduits||{__namespace:!0},window.jQuery);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();