(function(){this.composerFonctionnalites=function(){var n=null,c=null,l=null,o=null,h=null,v=null,s=null,f=function(){return this.closest("li")},a=function(n){if(n.objElement.sType)switch(n.objElement.sType){case"CrossUnitaireDeguste":case"CrossUnitaireDelicieux":case"CrossUnitaireUtiliser":case"UpUnitaire":case"CrossUnitaire":return n.objElement.objProduit;default:return n.objElement}else return n.objElement},t=[],u=ListesProduits_Fonctionnalite,i=Interfaces.jsWCRS642_ItfEvenement.enuTypeEvenementServeur,r=function(n){var t=n;return{subscribe:function(n){var i=n;Managers.jsWCRS609_MgrEvenement.abonnerEvenement(t,i,this)},unsubscribe:function(n){var i=n;Managers.jsWCRS609_MgrEvenement.desabonnerEvenement(t,i,this)}}},y=function(t){return t||Utl.Log.logError("140814033322 - La datasource ne doit pas être vide !"),n=new Utl.DataBase(t),e},p=function(n){return n||Utl.Log.logError("140814033328 - La datasource ne doit pas être vide !"),c=n,e},w=function(n){return n||Utl.Log.logError("140814033417 - La conf ajax ne doit pas être vide !"),v=n,e},b=function(n){return n||Utl.Log.logError("140814033420 - La provenance ne doit pas être vide !"),s=n,e},k=function(n){return n||Utl.Log.logError("140814033554 - L'objet 'templates' ne peut etre vide !"),o=n,e},d=function(n){return n||Utl.Log.logError("140814033647 - La localisation ne peut pas être null !"),h=n,e},g=function(n){return n||Utl.Log.logError("140814033753 - La popin de confirmation est indefinie !"),l=n,e},nt=function(n){return f=n,e},tt=function(n){return t.push(n),this},it=function(){n||Utl.Log.logError("140814033858 - La datasource ne doit pas etre vide !");l||Utl.Log.logError("140814033932 - La popin de confirmation est indefinie !");var i=function(){return this.parents().closest("li")};return t.push(u.SuppressionProduitHabituels().avecSuppressionRayonSiVide(n.SuppressionRayonSiVide).avecGetContenuElementParEvenement(n.getContenuElementParEvenement(i)).avecPopinConfirmation(l)),this},rt=function(i){n||Utl.Log.logError("140814034000 - La datasource ne doit pas etre vide !");i||Utl.Log.logError("140814034000 - La fonction ouverture de popin de confirmation est indefinie");var r=function(){return this.parents().closest("li")};return t.push(u.jsWCRS678_SuppressionProduitArrete.avecGetContenuElementParEvenement(n.getContenuElementParEvenement(r)).avecPopinConfirmation(i,n.getContenusElementParIdUnique)),this},ut=function(i){n||Utl.Log.logError("140814034000 - La datasource ne doit pas etre vide !");i||Utl.Log.logError("140814034000 - La fonction ouverture de popin de confirmation est indefinie");var r=function(){return this.closest("li")};return t.push(u.jsWCRS736_SuppressionProduitMobile.avecGetContenuElementParEvenement(n.getContenuElementParEvenement(r)).avecPopinConfirmation(i,n.getContenusElementParIdUnique)),this},ft=function(i){var r=u.affichageToolTip();return r.init.templates(o),r.init.fnGetContenuElementParEvenement(n.getContenuElementParEvenement(f)),r.init.localisation(h),t.push(r.avecTooltipVignetteProduit(i)),this},et=function(){var r=new u.fonctionnaliteTooltipSticker(o,c,n.getContenuElementParEvenement(f)),i;return t.push(r),i=new u.fonctionnaliteTooltipEvenementsPanier(n.getContenuElementParEvenement(f),n),t.push(i),this},ot=function(i){var r,u;return i||(i={}),i.objProvenanceArticle||(i.objProvenanceArticle=Utl.jsWCRS610_ProvenanceArticle.clone(s)),r=new ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS725_interProduitCompose(i),r.options.dataSource||(r.options.objDataBase=n),i&&i.objAnimation?r.options.objAnimation=i.objAnimation:r.options.objAnimation||(u=new animation.jsWCRS669_AnimerPlusUnMoinsUn({largeurInitiale:20,hauteurInitiale:26,positionOrigineGauche:18}),r.options.objAnimation=u),r.options.fnGetContenuElementParEvenement||(r.options.fnGetContenuElementParEvenement=f),t.push(r),this},st=function(){var i=u.affichageToolTip();return i.init.templates(o),i.init.fnGetContenuElementParEvenement(n.getContenuElementParEvenement(f)),i.init.localisation(h),t.push(i.avecTooltipAideProduitArrete()),this},ht=function(){return t.push(u.jsWCRS652_OuvertureBarreOutils),this},ct=function(i){var r,u;return i||(i={}),i.objProvenanceArticle||(i.objProvenanceArticle=Utl.jsWCRS610_ProvenanceArticle.clone(s)),r=new ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS672_InteractionPanierPlusUnMoinsUn(i),r.options.dataSource||(r.options.objDataBase=n),i&&i.objAnimation?r.options.objAnimation=i.objAnimation:r.options.objAnimation||(u=new animation.jsWCRS669_AnimerPlusUnMoinsUn({largeurInitiale:20,hauteurInitiale:26,positionOrigineGauche:18}),r.options.objAnimation=u),r.options.fnGetContenuElementParEvenement||(r.options.fnGetContenuElementParEvenement=f),t.push(r),this},lt=function(i,r){var u=function(){return this.closest(i)},f=ListesProduits_Fonctionnalite.jsWCRS653_AjouterAListe(r).avecGetContenuElementParEvenement(n.getContenuElementParEvenement(u)).avecGetContenuByIdUnique(n.getContenuByIdUnique);return t.push(f),this},at=function(i){i&&i.length!==0||Utl.Log.logError("150609111626 - Le selecteur du conteneur doit être renseigné !");var r=function(){return this.closest(i)},u=ListesProduits_Fonctionnalite.jsWCRS716_OutilVoirPlusDeProduits().avecGetContenuElementParEvenement(n.getContenuElementParEvenement(r)).avecEmettreEvenement(Managers.jsWCRS609_MgrEvenement.emettreEvenement);return t.push(u),this},vt=function(i){i&&i.length!==0||Utl.Log.logError("150609111627 - Le selecteur du conteneur doit être renseigné !");var r=function(){return this.closest(i)},u=ListesProduits_Fonctionnalite.jsWCRS707_interSuggererProduit().avecGetContenuElementParEvenement(n.getContenuElementParEvenement(r)).avecGetContenuByIdUnique(n.getContenuByIdUnique);return t.push(u),this},yt=function(i){var r=$.extend({elementClass:"aWCRS310_Product",fnGetObjProduit:a,fUpsellingAutorise:!0,fPlusUnMoinsUnAutorise:!0},i);return t.push((new u.jsWCRS621_PopinFicheProduit).avecGetContenuElementParEvenement(n.getContenuElementParEvenement(f)).avecGetObjProduit(r.fnGetObjProduit).AvecelementClass(r.elementClass).AvecUpsellingAutorise(r.fUpsellingAutorise).AvecPlusUnMoinsUnAutorise(r.fPlusUnMoinsUnAutorise).AvecProvenance(s)),this},pt=function(i,r){return i||(i="a.aWCRS3010_lotHomogene"),r||(r="a.aWCRS310_ComposerUnLot"),t.push(u.jsWCRS671_InteractionPanierUpselling().avecGetContenuElementParEvenement(n.getContenuElementParEvenement(f)).avecGetProduitsByIdUniqueBrii(n.getProduitsByIdUniqueBrii).avecEmettreEvenement(Managers.jsWCRS609_MgrEvenement.emettreEvenement).avecAppelAjouterLotHomogene(Managers.jsWCRS604_MgrPanier.AjouterLotHomogene).avecSelecteurBtnAjouterLotHomogene(i).avecSelecteurBtnComposerLotHeterogene(r).avecProvenanceArticle(Utl.jsWCRS610_ProvenanceArticle.clone(s))),this},wt=function(){var n=new ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS620_interactionViderPanier({objTemplatePopin:o.templatePopinViderPanier});return t.push(n),this},bt=function(n,i){var r=new ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS620_interactionViderPanier({selecteurLienViderPanier:n,objTemplatePopin:o.templatePopinViderPanier,$conteneurSpecifie:i});return t.push(r),this},kt=function(i){var r=".aWCRS310_FlashRecette";return i&&(r=i),t.push(u.jsWCRS618_affichagePopinRecette().avecGetContenuElementParEvenement(n.getContenuElementParEvenement(f)).AvecselecteurAfficherRecette(r).avecEmettreEvenement(Managers.jsWMKP601_MgrTrade.emettreAppelPopinRecette)),this},dt=function(n){return t.push(u.jsWCRS715_OuvAutoRecette().avecIdRecette(n).avecEmettreEvenement(Managers.jsWMKP601_MgrTrade.emettreAppelPopinRecette)),this},gt=function(){var i=new ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS622_interactionPanierRemplacerProduit({datasource:n,dsPicto:c,tagContainer:"li"});return i.options.fnGetContenuElementParEvenement||(i.options.fnGetContenuElementParEvenement=f),t.push(i),this},ni=function(){return t.push(new ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS700_interactionSubstitution({objDataBase:n,getTagContainer:f,objLoc:h,objProvenanceArticle:s.clone()})),this},ti=function(u){var e="max",f=".aWCRS310_More",h="QteMax",c="QteMaxPanier";u||(u={});u.sClassMax&&(e=u.sClassMax);u.sSelecteurTooltip&&(f=u.sSelecteurTooltip);var o=function(){this.addClass(e)},l=function(){this.removeClass(e)},a=function(){this.find(f).attr("data-tooltip",h)},v=function(){this.find(f).attr("data-tooltip",c)},y=function(){this.find(f).removeAttr("data-tooltip")},p=[o,a],w=[o,v],b=[l,y],s=[r(i.iPRODUIT_QUANTITE_INCREMENTEE),r(i.iPRODUIT_AJOUTE),r(i.iPRODUIT_QUANTITE_DECREMENTEE),r(i.iPRODUIT_SUPPRIME),r(i.iPRODUIT_STOCK_INSUFFISANT)],k=ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS682_InteractionPanierQuantiteMaxAtteinte().avecWhere(n.where).avecGetContenusElement(function(t){return t.sIdUnique?n.getContenusElementParIdUnique(t.sIdUnique):null}).avecProjectionsQteMaxOn(p).avecProjectionsQteMaxPanierOn(w).avecProjectionsOff(b).avecSubscribeOn(s).avecSubscribeOff(s);return t.push(k),this},ii=function(){var f=function(){this.addClass("AlerteProduitIndispoBrii")},e=function(){this.removeClass("AlerteProduitIndispoBrii")},u=[r(i.iPRODUIT_QUANTITE_INCREMENTEE),r(i.iPRODUIT_AJOUTE),r(i.iPRODUIT_QUANTITE_DECREMENTEE),r(i.iPRODUIT_SUPPRIME),r(i.iPRODUIT_STOCK_INSUFFISANT)],o=ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS682_InteractionPanierQuantiteMaxAtteinte().avecWhere(n.where).avecGetContenusElement(function(t){var i=null;return(t.objElement&&t.objElement.sIdUniqueBrii&&(i=t.objElement.sIdUniqueBrii),i&&i.length>0)?n.getContenusElementParIdUnique(i):null}).avecProjectionsQteMaxOn([f]).avecProjectionsOff([e]).avecSubscribeOn(u).avecSubscribeOff(u);return t.push(o),this},ri=function(){var f=function(){this.addClass("AlerteProduitIndispo")},e=function(){this.removeClass("AlerteProduitIndispo")},u=[r(i.iPRODUIT_QUANTITE_INCREMENTEE),r(i.iPRODUIT_AJOUTE),r(i.iPRODUIT_QUANTITE_DECREMENTEE),r(i.iPRODUIT_SUPPRIME)],o=ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS683_InteractionPanierStockIndispo().avecWhere(n.where).avecGetContenuElement(function(t){return t.sIdUnique?n.getContenuByIdUnique(t.sIdUnique):null}).avecProjectionsOn([f]).avecProjectionsOff([e]).avecSubscribeOn(u).avecSubscribeOff(u);return t.push(o),this},ui=function(){var f=function(){this.addClass("AlerteProduitIndispoPanier")},e=function(){this.removeClass("AlerteProduitIndispoPanier")},u=[r(i.iPANIER_MISE_A_JOUR)],o=ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS684_InteractionPanierStockIndispoPanier().avecWhere(n.where).avecGetContenuElement(function(t){return t.sIdUnique?n.getContenuByIdUnique(t.sIdUnique):null}).avecProjectionsOn([f]).avecProjectionsOff([e]).avecSubscribeOn(u).avecSubscribeOff(u);return t.push(o),this},fi=function(){return this},ei=function(i){return t.push(ListesProduits_Fonctionnalite.jsWCRS704_OuvertureAutoFicheProduit().avecfnGetContenuElementParsIdUnique(n.getContenuByIdUnique).avecGetObjProduit(a).avecIdUniqueProduitAOuvrir(i).AvecProvenance(s)),this},oi=function(u){var o=[r(i.iPRODUIT_QUANTITE_INCREMENTEE),r(i.iPRODUIT_AJOUTE),r(i.iPRODUIT_SUPPRIME),r(i.iPRODUIT_STOCK_INSUFFISANT)],f,e;return u&&u.sSelecteurTooltip&&(f=u.sSelecteurTooltip),e=ListesProduits_Fonctionnalite_InteractionsPanier.jsWCRS735_InteractionPanierQuantiteMinAtteinte().avecWhere(n.where).avecSelecteurTooltip(f).avecGetContenusElement(function(t){return t.sIdUnique?n.getContenusElementParIdUnique(t.sIdUnique):null}).avecSubscribeOn(o),t.push(e),this},si=function(){var n=[r(i.iPRODUIT_LIMITE_LIQUIDE_DEPASSEE)],f=Utilitaires.Ressources.vbNETsWCRS201.jsWCRS737_interLimiteLiquide,e=u.jsWCRS737_interLimiteLiquide().avecSubscribeOn(n).avecTemplates(o).avecLocalisation(f);return t.push(e),this},hi=function(){for(var i=[],n=0;n<t.length;n++)t[n].build?i.push(t[n].build()):i.push(t[n]);return i},ci={dataSource:y,dataSourcePicto:p,popinConfirmation:g,ajax:w,localisation:d,templates:k,provenanceArticle:b,getTagContainer:nt},e={init:ci,avecCustomFonctionnalite:tt,avecSuppressionProduitHabituels:it,avecSuppressionProduitCartouchePanier:rt,avecSuppressionProduitDetailPanierMobile:ut,avecPopinFicheProduit:yt,avecToolTipVignette:ft,avecPlusUnMoinsUn:ct,avecAComposer:ot,avecAjoutListe:lt,avecVoirPlusDeProduits:at,avecUpselling:pt,avecBarreOutils:ht,avecViderPanier:wt,avecViderPanierSpecifique:bt,avecRecette:kt,avecOuvertureRecetteAuto:dt,avecRemplacerProduit:gt,avecToolTipProduitArrete:st,avecQuantiteMaximaleAtteinteProduit:ti,avecQuantiteMaximaleAtteinteBriiHomogene:ii,avecQuantiteMinimaleAtteinteProduit:oi,avecAlerteProduitIndispo:ri,avecAlerteProduitIndispoPanier:ui,avecSubstitution:ni,avecOuvertureAutoFicheProduit:ei,avecSuggererProduit:vt,avecStickersVignetteProduit:fi,avecToolTipStickersVignetteProduit:et,avecLimiteLiquideDepassee:si,getAsArray:hi};return e}}).call(this.ListesProduits_Fonctionnalite=this.ListesProduits_Fonctionnalite||{__namespace:!0});typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();